2025-05-16 18:56:37.923 | INFO     | app.main:<module>:32 - 启动应用: AI Assistant API v0.1.0
2025-05-16 18:56:37.924 | INFO     | app.main:<module>:33 - 数据库: ai_assistant
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:89 - ============================== Registered Routes ==============================
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /docs, Methods: {'GET', 'HEAD'}, Name: swagger_ui_html
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /docs/oauth2-redirect, Methods: {'GET', 'HEAD'}, Name: swagger_ui_redirect
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /, Methods: {'GET'}, Name: root
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /health, Methods: {'GET'}, Name: health_check
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:96 - ==============================================================================
2025-05-16 18:56:50.037 | INFO     | app.main:<module>:32 - 启动应用: AI Assistant API v0.1.0
2025-05-16 18:56:50.037 | INFO     | app.main:<module>:33 - 数据库: ai_assistant
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:89 - ============================== Registered Routes ==============================
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /docs, Methods: {'GET', 'HEAD'}, Name: swagger_ui_html
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /docs/oauth2-redirect, Methods: {'GET', 'HEAD'}, Name: swagger_ui_redirect
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /, Methods: {'GET'}, Name: root
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /health, Methods: {'GET'}, Name: health_check
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:96 - ==============================================================================
2025-07-21 02:25:33.262 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:25:33.262 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:26:41.565 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:26:41.565 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:26:41.591 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:26:41.591 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:26:41.591 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:26:41.591 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:26:41.594 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:26:41.611 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:26:56.750 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:26:56.750 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:26:56.778 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:26:56.778 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:26:56.778 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:26:56.778 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:26:56.778 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:26:56.796 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:26:56.796 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:26:56.838 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_1] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ec2d5c0 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ebec2e0>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ea5c8a0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ec27880>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ea5c8a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.851 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 帮我查找Python教程
2025-07-21 02:26:56.859 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_2] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ed41540 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec304a0>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d2660>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea89a80>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d2660>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.866 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 深圳明天天气怎么样
2025-07-21 02:26:56.872 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_3] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e1aa600 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec32260>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebb9ef0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea89c60>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebb9ef0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.879 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_4] 开始处理意图: 附近有什么好吃的餐厅
2025-07-21 02:26:56.886 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_4] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ea81fc0 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec31fc0>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1e9b00>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8a520>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1e9b00>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.893 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_5] 开始处理意图: 比特币现在多少钱
2025-07-21 02:26:56.899 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_5] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e1f3280 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec31700>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebba0b0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea88040>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebba0b0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.906 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_6] 开始处理意图: 用浏览器帮我打开百度
2025-07-21 02:26:56.912 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_6] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ea81100 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec30f20>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1b7c40>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8a340>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1b7c40>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.919 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_7] 开始处理意图: 你好，今天心情怎么样
2025-07-21 02:26:56.921 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_7 不存在，创建新会话
2025-07-21 02:26:56.938 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_7] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e00d640 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec32a40>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d31c0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8ade0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d31c0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.945 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_8] 开始处理意图: 什么是人工智能
2025-07-21 02:26:56.947 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_8 不存在，创建新会话
2025-07-21 02:26:56.963 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_8] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e006680 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891eba8c80>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d0280>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8afc0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d0280>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.970 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_9] 开始处理意图: 我今天很开心
2025-07-21 02:26:56.971 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_9 不存在，创建新会话
2025-07-21 02:26:56.988 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_9] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ed4cc80 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec32c00>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1e5d30>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8a980>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1e5d30>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.995 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_10] 开始处理意图: Python是什么编程语言
2025-07-21 02:26:56.997 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_10 不存在，创建新会话
2025-07-21 02:26:57.016 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_10] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e023c40 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891eba8c80>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d0130>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8bb00>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d0130>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:57.319 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_11] 开始处理意图: 帮我计算1+1等于多少
2025-07-21 02:26:57.321 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_11 不存在，创建新会话
2025-07-21 02:26:57.338 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_11] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ebb68c0 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec33060>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebba4a0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8b600>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebba4a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:27:29.598 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:27:29.598 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:27:29.625 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:27:29.625 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:27:39.118 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:27:39.118 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:27:39.145 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:27:39.145 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:27:39.148 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:27:39.148 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:27:39.167 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:27:39.167 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:27:39.214 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:56.517 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_1] LLM未提供确认文本，生成确认文本...
2025-07-21 02:27:58.356 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:27:58.356 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_1] LLM 决定调用工具: ['browser_navigate']
2025-07-21 02:27:58.356 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_1] 确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:27:58.371 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_1] 已存储待执行工具信息
2025-07-21 02:27:58.371 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 帮我查找Python教程
2025-07-21 02:27:58.379 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.379 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.379 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.380 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:28:10.380 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 深圳明天天气怎么样
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.389 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.389 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.389 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:15.847 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:28:17.457 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要了解深圳明天的天气情况吗？
2025-07-21 02:28:17.457 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:28:17.457 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_3] 确认文本: 您想要了解深圳明天的天气情况吗？
2025-07-21 02:28:17.472 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_3] 已存储待执行工具信息
2025-07-21 02:28:17.473 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_4] 开始处理意图: 附近有什么好吃的餐厅
2025-07-21 02:28:17.482 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:26.054 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_4] LLM未提供确认文本，生成确认文本...
2025-07-21 02:28:28.985 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要查找附近的美食餐厅吗？
2025-07-21 02:28:28.986 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_4] LLM 决定调用工具: ['maps_text_search']
2025-07-21 02:28:28.986 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_4] 确认文本: 您想要查找附近的美食餐厅吗？
2025-07-21 02:28:29.001 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_4] 已存储待执行工具信息
2025-07-21 02:28:29.002 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_5] 开始处理意图: 比特币现在多少钱
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.012 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.012 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:42.929 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_5] LLM未提供确认文本，生成确认文本...
2025-07-21 02:28:44.424 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要了解比特币的当前价格吗？
2025-07-21 02:28:44.425 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_5] LLM 决定调用工具: ['getCoinGeckoPrices']
2025-07-21 02:28:44.425 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_5] 确认文本: 您想要了解比特币的当前价格吗？
2025-07-21 02:28:44.438 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_5] 已存储待执行工具信息
2025-07-21 02:28:44.438 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_6] 开始处理意图: 用浏览器帮我打开百度
2025-07-21 02:28:44.446 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.446 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.446 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.446 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:47.256 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_6] LLM未提供确认文本，生成确认文本...
2025-07-21 02:28:49.687 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要访问百度网站吗？
2025-07-21 02:28:49.687 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_6] LLM 决定调用工具: ['browser_navigate']
2025-07-21 02:28:49.687 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_6] 确认文本: 您想要访问百度网站吗？
2025-07-21 02:28:49.699 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_6] 已存储待执行工具信息
2025-07-21 02:28:49.700 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_7] 开始处理意图: 你好，今天心情怎么样
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.514 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_7] LLM 直接回复，无需调用工具。
2025-07-21 02:28:51.514 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_8] 开始处理意图: 什么是人工智能
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.523 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.523 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.523 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.989 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_8] LLM 直接回复，无需调用工具。
2025-07-21 02:28:53.989 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_9] 开始处理意图: 我今天很开心
2025-07-21 02:28:53.997 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.997 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.997 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.997 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.011 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_9] LLM 直接回复，无需调用工具。
2025-07-21 02:28:58.012 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_10] 开始处理意图: Python是什么编程语言
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.169 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_10] LLM 直接回复，无需调用工具。
2025-07-21 02:29:02.169 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_11] 开始处理意图: 帮我计算1+1等于多少
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:05.471 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_11] LLM 直接回复，无需调用工具。
2025-07-21 02:29:24.254 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:29:24.254 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:29:46.456 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:29:46.456 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:29:46.483 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:29:46.499 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:29:46.500 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.505 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_1] LLM 直接回复，无需调用工具。
2025-07-21 02:29:53.506 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.513 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.513 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.513 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.513 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.935 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:30:12.935 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:16.107 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:30:19.214 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:30:19.214 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:30:19.214 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:30:51.760 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:30:51.760 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:30:51.786 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:30:51.786 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-21 02:30:51.786 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-21 02:30:51.786 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:30:51.789 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:30:51.805 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:30:51.806 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:30:51.845 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.561 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_1] LLM 直接回复，无需调用工具。
2025-07-21 02:30:57.561 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:02.999 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:31:02.999 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:06.043 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:31:08.133 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:31:08.133 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:31:08.134 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:32:03.689 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:32:03.689 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:32:03.714 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:32:03.717 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:32:03.717 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:32:03.717 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:32:03.717 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:32:03.717 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:32:03.733 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:32:03.734 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:32:03.773 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.773 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.773 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.794 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_1] LLM 直接回复，无需调用工具。
2025-07-21 02:32:36.794 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.802 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.802 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.898 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_2] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:32:53.898 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_2] 确认文本: 

<response>

2025-07-21 02:32:53.899 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:56.275 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:32:59.203 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:32:59.203 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:32:59.203 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:36:23.089 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:36:23.089 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:36:23.116 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:36:23.116 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:36:23.116 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:36:23.116 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:36:23.133 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:36:23.133 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.174 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.174 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.174 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:33.565 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_1] LLM未提供确认文本，生成确认文本...
2025-07-21 02:36:36.009 | INFO     | app.services.intent_service:generate_confirmation_text:251 - 生成的确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:36:36.009 | INFO     | app.services.intent_service:process_intent:171 - [Session: test_session_1] LLM 决定调用工具: ['browser_navigate']
2025-07-21 02:36:36.010 | INFO     | app.services.intent_service:process_intent:174 - [Session: test_session_1] 确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:36:36.010 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.629 | INFO     | app.services.intent_service:process_intent:188 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:36:41.630 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:36:41.635 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.635 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:50.898 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:37:00.025 | INFO     | app.services.intent_service:generate_confirmation_text:251 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:37:00.025 | INFO     | app.services.intent_service:process_intent:171 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:37:00.025 | INFO     | app.services.intent_service:process_intent:174 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:37:35.195 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:37:35.195 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:37:35.223 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:37:35.240 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:37:35.240 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.282 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.282 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.282 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.282 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:43.176 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_1] LLM未提供确认文本，生成确认文本...
2025-07-21 02:37:45.844 | INFO     | app.services.intent_service:generate_confirmation_text:251 - 生成的确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:37:45.844 | INFO     | app.services.intent_service:process_intent:171 - [Session: test_session_1] LLM 决定调用工具: ['browser_navigate']
2025-07-21 02:37:45.844 | INFO     | app.services.intent_service:process_intent:174 - [Session: test_session_1] 确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:37:45.844 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.318 | INFO     | app.services.intent_service:process_intent:188 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:37:55.319 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:37:55.325 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.325 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.325 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.325 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:38:00.378 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:38:04.829 | INFO     | app.services.intent_service:generate_confirmation_text:251 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:38:04.829 | INFO     | app.services.intent_service:process_intent:171 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:38:04.829 | INFO     | app.services.intent_service:process_intent:174 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
2025-07-22 20:43:39.374 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 20:43:39.374 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 20:43:39.400 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 20:43:39.400 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 20:43:39.401 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 20:43:39.402 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 20:43:39.403 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: 245bdcb4-52b2-4edc-b875-0177dc747714 for user 1
2025-07-22 20:43:39.446 | ERROR    | app.services.unified_execution_service:get_session_manager:147 - 会话管理器操作失败: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`ai_assistant`.`sessions`, CONSTRAINT `sessions_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`))')
[SQL: INSERT INTO sessions (session_id, user_id, status, created_at) VALUES (%s, %s, %s, %s)]
[parameters: ('245bdcb4-52b2-4edc-b875-0177dc747714', 1, 'parsing', datetime.datetime(2025, 7, 22, 20, 43, 39, 439301))]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-22 20:43:39.448 | ERROR    | app.services.unified_execution_service:execute_tool_unified:227 - 统一执行服务失败: 'ExecuteRequest' object has no attribute 'sessionId'
2025-07-22 20:43:39.448 | ERROR    | app.services.unified_execution_service:get_session_manager:147 - 会话管理器操作失败: 执行失败: 'ExecuteRequest' object has no attribute 'sessionId'
2025-07-22 20:43:39.448 | ERROR    | app.services.unified_execution_service:log_operation:125 - 记录操作日志失败: test-session-123, 错误: 'created_at' is an invalid keyword argument for Log
2025-07-22 20:43:39.458 | INFO     | app.services.unified_execution_service:update_session_status:96 - 更新会话状态: test-session-123 -> confirmed
2025-07-22 20:43:39.458 | INFO     | app.services.intent_service:execute_confirmed_tools:331 - [Session: test-session-123] 开始执行确认的工具
2025-07-22 20:43:39.472 | INFO     | app.services.unified_execution_service:update_session_status:96 - 更新会话状态: test-session-123 -> completed
2025-07-22 20:43:39.473 | ERROR    | app.services.unified_execution_service:log_operation:125 - 记录操作日志失败: test-session-123, 错误: 'created_at' is an invalid keyword argument for Log
2025-07-22 20:43:39.473 | INFO     | app.services.unified_execution_service:confirm_and_execute_unified:303 - 确认执行成功: test-session-123
2025-07-22 20:44:52.358 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 20:44:52.358 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 20:44:52.385 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 20:44:52.385 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 20:44:52.386 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 20:44:52.387 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 20:45:20.245 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 20:45:20.246 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 20:45:20.276 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 20:45:20.276 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-22 20:45:20.276 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-22 20:45:20.276 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 20:45:20.276 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 20:45:20.276 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 20:45:20.276 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 20:45:20.276 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 20:45:20.277 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 20:45:20.278 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 20:45:20.278 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 20:45:20.278 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 20:45:20.278 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 20:45:20.278 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 20:45:20.278 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 20:45:20.278 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 20:45:20.278 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 20:45:20.278 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 20:45:32.707 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 20:45:32.707 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 20:45:32.734 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 20:45:32.734 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-22 20:45:32.734 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-22 20:45:32.734 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 20:45:32.735 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 20:45:32.736 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 20:45:32.737 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 20:45:32.737 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 20:45:32.737 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 20:45:32.737 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: 806b5da8-ecdb-411a-ba15-32ceef7d416f for user 1
2025-07-22 20:45:32.780 | ERROR    | app.services.unified_execution_service:get_session_manager:146 - 会话管理器操作失败: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`ai_assistant`.`sessions`, CONSTRAINT `sessions_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`))')
[SQL: INSERT INTO sessions (session_id, user_id, status, created_at) VALUES (%s, %s, %s, %s)]
[parameters: ('806b5da8-ecdb-411a-ba15-32ceef7d416f', 1, 'parsing', datetime.datetime(2025, 7, 22, 20, 45, 32, 773780))]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-22 20:45:32.781 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: 4b71ebe9-3437-42f7-a382-7515d29db5e0 for user 1
2025-07-22 20:45:32.789 | ERROR    | app.services.unified_execution_service:execute_tool_unified:226 - 统一执行服务失败: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`ai_assistant`.`sessions`, CONSTRAINT `sessions_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`))')
[SQL: INSERT INTO sessions (session_id, user_id, status, created_at) VALUES (%s, %s, %s, %s)]
[parameters: ('4b71ebe9-3437-42f7-a382-7515d29db5e0', 1, 'parsing', datetime.datetime(2025, 7, 22, 20, 45, 32, 784640))]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-22 20:45:32.789 | ERROR    | app.services.unified_execution_service:get_session_manager:146 - 会话管理器操作失败: 执行失败: (pymysql.err.IntegrityError) (1452, 'Cannot add or update a child row: a foreign key constraint fails (`ai_assistant`.`sessions`, CONSTRAINT `sessions_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`))')
[SQL: INSERT INTO sessions (session_id, user_id, status, created_at) VALUES (%s, %s, %s, %s)]
[parameters: ('4b71ebe9-3437-42f7-a382-7515d29db5e0', 1, 'parsing', datetime.datetime(2025, 7, 22, 20, 45, 32, 784640))]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-22 20:45:32.808 | INFO     | app.services.unified_execution_service:update_session_status:96 - 更新会话状态: test-session-123 -> confirmed
2025-07-22 20:45:32.808 | INFO     | app.services.intent_service:execute_confirmed_tools:331 - [Session: test-session-123] 开始执行确认的工具
2025-07-22 20:45:32.823 | INFO     | app.services.unified_execution_service:update_session_status:96 - 更新会话状态: test-session-123 -> completed
2025-07-22 20:45:32.830 | INFO     | app.services.unified_execution_service:confirm_and_execute_unified:302 - 确认执行成功: test-session-123
2025-07-22 20:46:03.550 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 20:46:03.550 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 20:46:03.577 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 20:46:03.578 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 20:46:39.669 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 20:46:39.669 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 20:46:39.695 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 20:46:39.696 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-22 20:46:39.696 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-22 20:46:39.696 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 20:46:39.696 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 20:46:39.696 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 20:46:39.696 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 20:46:39.696 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 20:46:39.696 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 20:46:39.696 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 20:46:39.697 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 20:46:39.697 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 20:46:39.697 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 20:46:39.697 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 20:46:39.697 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 20:46:39.697 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 20:46:39.697 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 20:46:39.697 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 20:46:39.697 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 20:46:39.698 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 20:46:39.699 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: 8d61ec48-5d22-434e-9e26-91c0b578c8e3 for user 5
2025-07-22 20:46:39.752 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: 8d61ec48-5d22-434e-9e26-91c0b578c8e3
2025-07-22 20:46:39.760 | INFO     | app.services.unified_execution_service:update_session_status:96 - 更新会话状态: 8d61ec48-5d22-434e-9e26-91c0b578c8e3 -> testing
2025-07-22 20:46:39.770 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: d2cdc015-3024-4779-abbc-4e3803f8d5fd for user 5
2025-07-22 20:46:39.785 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: d2cdc015-3024-4779-abbc-4e3803f8d5fd
2025-07-22 20:46:39.800 | INFO     | app.services.unified_execution_service:update_session_status:96 - 更新会话状态: d2cdc015-3024-4779-abbc-4e3803f8d5fd -> executing
2025-07-22 20:46:39.800 | INFO     | app.services.execute_service:execute_tool:49 - 服务层：开始执行工具: tool_id=test_tool, session_id=d2cdc015-3024-4779-abbc-4e3803f8d5fd
2025-07-22 20:46:39.816 | INFO     | app.services.execute_service:execute_tool:74 - Updated session d2cdc015-3024-4779-abbc-4e3803f8d5fd status to executing and logged start.
2025-07-22 20:46:39.821 | ERROR    | app.services.execute_service:execute_tool:87 - 服务层：未找到工具: tool_id=test_tool
2025-07-22 20:46:39.829 | INFO     | app.services.unified_execution_service:update_session_status:96 - 更新会话状态: d2cdc015-3024-4779-abbc-4e3803f8d5fd -> completed
2025-07-22 20:46:39.839 | ERROR    | app.services.unified_execution_service:update_session_status:99 - 更新会话状态失败: d2cdc015-3024-4779-abbc-4e3803f8d5fd, 错误: Unconsumed column names: error_message
2025-07-22 20:46:39.841 | ERROR    | app.services.unified_execution_service:execute_tool_unified:226 - 统一执行服务失败: Unconsumed column names: error_message
2025-07-22 20:46:39.841 | ERROR    | app.services.unified_execution_service:get_session_manager:146 - 会话管理器操作失败: 执行失败: Unconsumed column names: error_message (sessionId: d2cdc015-3024-4779-abbc-4e3803f8d5fd)
2025-07-22 20:46:39.858 | INFO     | app.services.unified_execution_service:update_session_status:96 - 更新会话状态: test-session-123 -> confirmed
2025-07-22 20:46:39.858 | INFO     | app.services.intent_service:execute_confirmed_tools:331 - [Session: test-session-123] 开始执行确认的工具
2025-07-22 20:46:39.872 | INFO     | app.services.unified_execution_service:update_session_status:96 - 更新会话状态: test-session-123 -> completed
2025-07-22 20:46:39.883 | INFO     | app.services.unified_execution_service:confirm_and_execute_unified:302 - 确认执行成功: test-session-123
2025-07-22 20:47:21.048 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 20:47:21.048 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 20:47:21.074 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 20:47:21.074 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 20:47:21.075 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 20:47:21.076 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 20:47:21.077 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: 0cfab445-59ab-4821-bf97-8bc7177d9703 for user 5
2025-07-22 20:47:21.126 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: 0cfab445-59ab-4821-bf97-8bc7177d9703
2025-07-22 20:47:21.134 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: 0cfab445-59ab-4821-bf97-8bc7177d9703 -> testing
2025-07-22 20:47:21.144 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: 262a1c3a-3254-4711-be8a-2e2df476b2a9 for user 5
2025-07-22 20:47:21.157 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: 262a1c3a-3254-4711-be8a-2e2df476b2a9
2025-07-22 20:47:21.172 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: 262a1c3a-3254-4711-be8a-2e2df476b2a9 -> executing
2025-07-22 20:47:21.172 | INFO     | app.services.execute_service:execute_tool:49 - 服务层：开始执行工具: tool_id=test_tool, session_id=262a1c3a-3254-4711-be8a-2e2df476b2a9
2025-07-22 20:47:21.185 | INFO     | app.services.execute_service:execute_tool:74 - Updated session 262a1c3a-3254-4711-be8a-2e2df476b2a9 status to executing and logged start.
2025-07-22 20:47:21.189 | ERROR    | app.services.execute_service:execute_tool:87 - 服务层：未找到工具: tool_id=test_tool
2025-07-22 20:47:21.197 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: 262a1c3a-3254-4711-be8a-2e2df476b2a9 -> completed
2025-07-22 20:47:21.213 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: 262a1c3a-3254-4711-be8a-2e2df476b2a9 -> error
2025-07-22 20:47:21.228 | ERROR    | app.services.unified_execution_service:execute_tool_unified:227 - 统一执行服务失败: 'ExecuteResponse' object has no attribute 'get'
2025-07-22 20:47:21.228 | ERROR    | app.services.unified_execution_service:get_session_manager:147 - 会话管理器操作失败: 执行失败: 'ExecuteResponse' object has no attribute 'get' (sessionId: 262a1c3a-3254-4711-be8a-2e2df476b2a9)
2025-07-22 20:47:21.244 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> confirmed
2025-07-22 20:47:21.244 | INFO     | app.services.intent_service:execute_confirmed_tools:331 - [Session: test-session-123] 开始执行确认的工具
2025-07-22 20:47:21.258 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> completed
2025-07-22 20:47:21.265 | INFO     | app.services.unified_execution_service:confirm_and_execute_unified:303 - 确认执行成功: test-session-123
2025-07-22 20:48:12.281 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 20:48:12.281 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 20:48:12.314 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 20:48:12.315 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 20:48:12.316 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 20:48:12.317 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: 06e6cbd8-cdbf-45d5-98b8-e8aeb2dfcc0d for user 5
2025-07-22 20:48:12.373 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: 06e6cbd8-cdbf-45d5-98b8-e8aeb2dfcc0d
2025-07-22 20:48:12.382 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: 06e6cbd8-cdbf-45d5-98b8-e8aeb2dfcc0d -> testing
2025-07-22 20:48:12.392 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: 69eb77d2-92c3-4de6-b976-dca99793df95 for user 5
2025-07-22 20:48:12.406 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: 69eb77d2-92c3-4de6-b976-dca99793df95
2025-07-22 20:48:12.426 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: 69eb77d2-92c3-4de6-b976-dca99793df95 -> executing
2025-07-22 20:48:12.426 | INFO     | app.services.execute_service:execute_tool:49 - 服务层：开始执行工具: tool_id=test_tool, session_id=69eb77d2-92c3-4de6-b976-dca99793df95
2025-07-22 20:48:12.441 | INFO     | app.services.execute_service:execute_tool:74 - Updated session 69eb77d2-92c3-4de6-b976-dca99793df95 status to executing and logged start.
2025-07-22 20:48:12.445 | ERROR    | app.services.execute_service:execute_tool:87 - 服务层：未找到工具: tool_id=test_tool
2025-07-22 20:48:12.453 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: 69eb77d2-92c3-4de6-b976-dca99793df95 -> completed
2025-07-22 20:48:12.462 | INFO     | app.services.unified_execution_service:execute_tool_unified:216 - 工具执行成功: 69eb77d2-92c3-4de6-b976-dca99793df95, 工具: test_tool
2025-07-22 20:48:12.472 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: 69eb77d2-92c3-4de6-b976-dca99793df95 -> error
2025-07-22 20:48:12.490 | ERROR    | app.services.unified_execution_service:execute_tool_unified:236 - 统一执行服务失败: 2 validation errors for ExecuteResponse
toolId
  Field required [type=missing, input_value={'result': {}, 'tts': '',...4de6-b976-dca99793df95'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
success
  Field required [type=missing, input_value={'result': {}, 'tts': '',...4de6-b976-dca99793df95'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-07-22 20:48:12.490 | ERROR    | app.services.unified_execution_service:get_session_manager:147 - 会话管理器操作失败: 执行失败: 2 validation errors for ExecuteResponse
toolId
  Field required [type=missing, input_value={'result': {}, 'tts': '',...4de6-b976-dca99793df95'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
success
  Field required [type=missing, input_value={'result': {}, 'tts': '',...4de6-b976-dca99793df95'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing (sessionId: 69eb77d2-92c3-4de6-b976-dca99793df95)
2025-07-22 20:48:12.511 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> confirmed
2025-07-22 20:48:12.511 | INFO     | app.services.intent_service:execute_confirmed_tools:331 - [Session: test-session-123] 开始执行确认的工具
2025-07-22 20:48:12.526 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> completed
2025-07-22 20:48:12.535 | INFO     | app.services.unified_execution_service:confirm_and_execute_unified:312 - 确认执行成功: test-session-123
2025-07-22 21:01:44.573 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 21:01:44.574 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 21:01:44.600 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 21:01:44.600 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-22 21:01:44.600 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 21:01:44.601 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 21:01:44.602 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 21:01:44.603 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: dbdfd0c9-3e63-4190-a32c-1647347c6928 for user 5
2025-07-22 21:01:44.656 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: dbdfd0c9-3e63-4190-a32c-1647347c6928
2025-07-22 21:01:44.670 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: dbdfd0c9-3e63-4190-a32c-1647347c6928 -> testing
2025-07-22 21:01:44.679 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: bc0c22a9-8d96-4f87-bae3-76d668bf53d0 for user 5
2025-07-22 21:01:44.695 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: bc0c22a9-8d96-4f87-bae3-76d668bf53d0
2025-07-22 21:01:44.713 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: bc0c22a9-8d96-4f87-bae3-76d668bf53d0 -> executing
2025-07-22 21:01:44.713 | INFO     | app.services.execute_service:execute_tool:49 - 服务层：开始执行工具: tool_id=test_tool, session_id=bc0c22a9-8d96-4f87-bae3-76d668bf53d0
2025-07-22 21:01:44.727 | INFO     | app.services.execute_service:execute_tool:74 - Updated session bc0c22a9-8d96-4f87-bae3-76d668bf53d0 status to executing and logged start.
2025-07-22 21:01:44.731 | ERROR    | app.services.execute_service:execute_tool:87 - 服务层：未找到工具: tool_id=test_tool
2025-07-22 21:01:44.738 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: bc0c22a9-8d96-4f87-bae3-76d668bf53d0 -> completed
2025-07-22 21:01:44.746 | INFO     | app.services.unified_execution_service:execute_tool_unified:220 - 工具执行成功: bc0c22a9-8d96-4f87-bae3-76d668bf53d0, 工具: test_tool
2025-07-22 21:01:44.763 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> confirmed
2025-07-22 21:01:44.763 | INFO     | app.services.intent_service:execute_confirmed_tools:331 - [Session: test-session-123] 开始执行确认的工具
2025-07-22 21:01:44.778 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> completed
2025-07-22 21:01:44.788 | INFO     | app.services.unified_execution_service:confirm_and_execute_unified:316 - 确认执行成功: test-session-123
2025-07-22 21:02:22.715 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 21:02:22.716 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 21:02:22.747 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 21:02:22.747 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-22 21:02:22.748 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-22 21:02:22.748 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 21:02:22.748 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 21:02:22.748 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 21:02:22.748 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 21:02:22.748 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 21:02:22.748 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 21:02:22.749 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 21:02:22.749 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 21:02:22.749 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 21:02:22.749 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 21:02:22.749 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 21:02:22.749 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 21:02:22.749 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 21:02:22.749 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 21:02:22.749 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 21:02:22.750 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 21:02:22.750 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 21:02:22.750 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 21:02:22.750 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 21:02:22.750 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 21:02:22.750 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 21:02:22.750 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 21:02:22.750 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 21:02:22.750 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 21:02:22.751 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 21:02:22.751 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 21:02:22.751 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: 85895f85-225e-446d-9da6-7b9c5430184c for user 5
2025-07-22 21:02:22.804 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: 85895f85-225e-446d-9da6-7b9c5430184c
2025-07-22 21:02:22.818 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: 85895f85-225e-446d-9da6-7b9c5430184c -> testing
2025-07-22 21:02:22.831 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: e59b04f4-3a85-48d8-89f1-175b0a13d573 for user 5
2025-07-22 21:02:22.844 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: e59b04f4-3a85-48d8-89f1-175b0a13d573
2025-07-22 21:02:22.860 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: e59b04f4-3a85-48d8-89f1-175b0a13d573 -> executing
2025-07-22 21:02:22.860 | INFO     | app.services.execute_service:execute_tool:49 - 服务层：开始执行工具: tool_id=test_tool, session_id=e59b04f4-3a85-48d8-89f1-175b0a13d573
2025-07-22 21:02:22.874 | INFO     | app.services.execute_service:execute_tool:74 - Updated session e59b04f4-3a85-48d8-89f1-175b0a13d573 status to executing and logged start.
2025-07-22 21:02:22.879 | ERROR    | app.services.execute_service:execute_tool:87 - 服务层：未找到工具: tool_id=test_tool
2025-07-22 21:02:22.887 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: e59b04f4-3a85-48d8-89f1-175b0a13d573 -> completed
2025-07-22 21:02:22.896 | INFO     | app.services.unified_execution_service:execute_tool_unified:220 - 工具执行成功: e59b04f4-3a85-48d8-89f1-175b0a13d573, 工具: test_tool
2025-07-22 21:02:22.913 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> confirmed
2025-07-22 21:02:22.913 | INFO     | app.services.intent_service:execute_confirmed_tools:331 - [Session: test-session-123] 开始执行确认的工具
2025-07-22 21:02:22.928 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> completed
2025-07-22 21:02:22.937 | INFO     | app.services.unified_execution_service:confirm_and_execute_unified:316 - 确认执行成功: test-session-123
2025-07-22 21:02:50.439 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-22 21:02:50.440 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-22 21:02:50.465 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-22 21:02:50.466 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-22 21:02:50.467 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-22 21:02:50.468 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: f53d93de-10a2-439b-8015-a1a7e5729e63 for user 5
2025-07-22 21:02:50.529 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: f53d93de-10a2-439b-8015-a1a7e5729e63
2025-07-22 21:02:50.538 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: f53d93de-10a2-439b-8015-a1a7e5729e63 -> testing
2025-07-22 21:02:50.549 | INFO     | app.services.unified_execution_service:get_or_create_session:48 - 创建新会话ID: f4943a49-bb23-4e0a-9d5b-9b7d5c7b6582 for user 5
2025-07-22 21:02:50.563 | INFO     | app.services.unified_execution_service:get_or_create_session:67 - 创建新会话: f4943a49-bb23-4e0a-9d5b-9b7d5c7b6582
2025-07-22 21:02:50.579 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: f4943a49-bb23-4e0a-9d5b-9b7d5c7b6582 -> executing
2025-07-22 21:02:50.580 | INFO     | app.services.execute_service:execute_tool:49 - 服务层：开始执行工具: tool_id=test_tool, session_id=f4943a49-bb23-4e0a-9d5b-9b7d5c7b6582
2025-07-22 21:02:50.594 | INFO     | app.services.execute_service:execute_tool:74 - Updated session f4943a49-bb23-4e0a-9d5b-9b7d5c7b6582 status to executing and logged start.
2025-07-22 21:02:50.598 | ERROR    | app.services.execute_service:execute_tool:87 - 服务层：未找到工具: tool_id=test_tool
2025-07-22 21:02:50.606 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: f4943a49-bb23-4e0a-9d5b-9b7d5c7b6582 -> completed
2025-07-22 21:02:50.614 | INFO     | app.services.unified_execution_service:execute_tool_unified:220 - 工具执行成功: f4943a49-bb23-4e0a-9d5b-9b7d5c7b6582, 工具: test_tool
2025-07-22 21:02:50.631 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> confirmed
2025-07-22 21:02:50.631 | INFO     | app.services.intent_service:execute_confirmed_tools:331 - [Session: test-session-123] 开始执行确认的工具
2025-07-22 21:02:50.644 | INFO     | app.services.unified_execution_service:update_session_status:93 - 更新会话状态: test-session-123 -> completed
2025-07-22 21:02:50.653 | INFO     | app.services.unified_execution_service:confirm_and_execute_unified:316 - 确认执行成功: test-session-123
2025-07-23 14:52:02.706 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-23 14:52:02.708 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-23 14:52:02.739 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-23 14:52:02.739 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-23 14:52:02.739 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-23 14:52:02.740 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-23 14:52:02.740 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-23 14:52:02.740 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-23 14:52:02.740 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-23 14:52:02.740 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-23 14:52:02.740 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-23 14:52:02.740 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-23 14:52:02.740 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-23 14:52:02.740 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-23 14:52:02.741 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-23 14:52:02.742 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-23 14:52:02.742 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-23 14:52:02.742 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-23 14:52:02.742 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-23 14:52:02.742 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-23 14:52:02.742 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-23 14:52:02.742 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 07:58:30.305 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 07:58:30.305 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 07:58:30.332 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 07:58:30.332 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-30 07:58:30.332 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-30 07:58:30.332 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 07:58:30.332 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 07:58:30.332 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 07:58:30.333 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 07:58:30.334 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 07:58:48.146 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 07:58:48.146 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 07:58:48.176 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 07:58:48.177 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 07:58:48.178 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 08:11:00.170 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 08:11:00.170 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 08:11:00.197 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 08:11:00.198 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 08:11:00.199 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 08:11:00.199 | INFO     | __main__:test_mcp_client:20 - 开始测试修复后的MCP客户端...
2025-07-30 08:11:00.199 | INFO     | app.utils.mcp_client:__init__:77 - MCP客户端包装器：配置加载成功
2025-07-30 08:11:00.199 | INFO     | app.utils.mcp_client:__init__:79 - 已加载 4 个MCP服务器配置
2025-07-30 08:11:00.199 | INFO     | __main__:test_mcp_client:25 - MCP客户端初始化成功，加载了 4 个服务器配置
2025-07-30 08:11:00.199 | INFO     | __main__:test_mcp_client:28 - 测试执行 maps_weather 工具...
2025-07-30 08:11:00.199 | INFO     | app.utils.mcp_client:_create_client_and_connect:92 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-30 08:11:00.674 | INFO     | app.utils.mcp_client:_create_client_and_connect:97 - 成功连接到MCP服务器: amap-maps
2025-07-30 08:11:00.674 | INFO     | app.utils.mcp_client:execute_tool:192 - 准备通过MCP客户端 ('amap-maps') 执行工具: tool=maps_weather, params={'city': '上海'}
2025-07-30 08:11:00.870 | INFO     | app.utils.mcp_client:execute_tool:226 - MCP客户端执行工具成功: tool=maps_weather
2025-07-30 08:11:00.879 | WARNING  | app.utils.mcp_client:execute_tool:255 - 清理MCP客户端资源时出错: Attempted to exit cancel scope in a different task than it was entered in
2025-07-30 08:11:00.879 | INFO     | __main__:test_mcp_client:35 - 工具执行结果: {'tool_id': 'maps_weather', 'success': True, 'result': {'message': '{\n  "city": "上海市",\n  "forecasts": [\n    {\n      "date": "2025-07-30",\n      "week": "3",\n      "dayweather": "暴雨",\n      "nightweather": "小雨",\n      "daytemp": "28",\n      "nighttemp": "26",\n      "daywind": "东南",\n      "nightwind": "东南",\n      "daypower": "1-3",\n      "nightpower": "1-3",\n      "daytemp_float": "28.0",\n      "nighttemp_float": "26.0"\n    },\n    {\n      "date": "2025-07-31",\n      "week": "4",\n      "dayweather": "小雨",\n      "nightweather": "阴",\n      "daytemp": "30",\n      "nighttemp": "27",\n      "daywind": "东南",\n      "nightwind": "东南",\n      "daypower": "1-3",\n      "nightpower": "1-3",\n      "daytemp_float": "30.0",\n      "nighttemp_float": "27.0"\n    },\n    {\n      "date": "2025-08-01",\n      "week": "5",\n      "dayweather": "阴",\n      "nightweather": "阴",\n      "daytemp": "31",\n      "nighttemp": "27",\n      "daywind": "东南",\n      "nightwind": "东南",\n      "daypower": "1-3",\n      "nightpower": "1-3",\n      "daytemp_float": "31.0",\n      "nighttemp_float": "27.0"\n    },\n    {\n      "date": "2025-08-02",\n      "week": "6",\n      "dayweather": "阴",\n      "nightweather": "阴",\n      "daytemp": "32",\n      "nighttemp": "27",\n      "daywind": "东南",\n      "nightwind": "东南",\n      "daypower": "1-3",\n      "nightpower": "1-3",\n      "daytemp_float": "32.0",\n      "nighttemp_float": "27.0"\n    }\n  ]\n}'}}
2025-07-30 08:11:00.880 | INFO     | __main__:test_mcp_client:38 - ✅ MCP客户端修复成功！工具执行正常
2025-07-30 15:59:15.101 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 15:59:15.101 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 15:59:15.127 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 15:59:15.127 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-30 15:59:15.127 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-30 15:59:15.127 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 15:59:15.127 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 15:59:15.127 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 15:59:15.127 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 15:59:15.127 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 15:59:15.127 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 15:59:15.128 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 15:59:15.129 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 15:59:15.129 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 15:59:15.129 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 15:59:15.129 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 15:59:15.129 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 15:59:15.129 | INFO     | __main__:main:257 - 检查MCP服务器状态...
2025-07-30 15:59:15.129 | ERROR    | __main__:main:311 - 同步脚本执行失败: 'MCPServerManager' object has no attribute 'load_config'
2025-07-30 15:59:52.116 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 15:59:52.116 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 15:59:52.142 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 15:59:52.142 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-30 15:59:52.142 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-30 15:59:52.142 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 15:59:52.142 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 15:59:52.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 15:59:52.144 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 15:59:52.144 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 15:59:52.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 15:59:52.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 15:59:52.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 15:59:52.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 15:59:52.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 15:59:52.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 15:59:52.144 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 15:59:52.144 | INFO     | __main__:main:257 - 检查MCP服务器状态...
2025-07-30 15:59:52.145 | WARNING  | __main__:main:268 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 15:59:52.145 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 15:59:52.145 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 15:59:52.146 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 15:59:52.148 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 15:59:52.149 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 15:59:57.174 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 23877)
2025-07-30 15:59:57.184 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 23879)
2025-07-30 16:00:09.096 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 23873)
2025-07-30 16:00:09.315 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 23875)
2025-07-30 16:00:09.377 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:00:09.466 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:00:09.544 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:00:09.683 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:00:09.806 | INFO     | __main__:main:281 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:00:09.849 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:00:09.849 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:00:09.849 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:00:09.849 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:00:09.851 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 playwright 工具时发生异常: MCPClientWrapper.get_tool_info() missing 1 required positional argument: 'query'
2025-07-30 16:00:09.852 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:00:09.852 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 minimax-mcp-js 工具时发生异常: MCPClientWrapper.get_tool_info() missing 1 required positional argument: 'query'
2025-07-30 16:00:09.852 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:00:09.852 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 amap-maps 工具时发生异常: MCPClientWrapper.get_tool_info() missing 1 required positional argument: 'query'
2025-07-30 16:00:09.852 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:00:09.852 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 web3-rpc 工具时发生异常: MCPClientWrapper.get_tool_info() missing 1 required positional argument: 'query'
2025-07-30 16:00:09.852 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:00:09.852 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:00:09.852 | INFO     | __main__:remove_orphaned_tools:194 - 开始清理孤立的MCP工具...
2025-07-30 16:00:09.964 | INFO     | __main__:remove_orphaned_tools:235 - 未发现孤立的MCP工具
2025-07-30 16:05:14.751 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:05:14.751 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:05:14.779 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:05:14.780 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 16:05:14.781 | INFO     | __main__:main:257 - 检查MCP服务器状态...
2025-07-30 16:05:14.781 | WARNING  | __main__:main:268 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 16:05:14.781 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 16:05:14.781 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 16:05:14.782 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 16:05:14.784 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 16:05:14.785 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 16:05:19.790 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 5287)
2025-07-30 16:05:19.791 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 5289)
2025-07-30 16:05:31.303 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 5283)
2025-07-30 16:05:31.304 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 5285)
2025-07-30 16:05:31.304 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:05:31.304 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:05:31.304 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:05:31.304 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:05:31.304 | INFO     | __main__:main:281 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:05:31.304 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:05:31.304 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:05:31.304 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:05:31.304 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:05:31.305 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 playwright 工具时发生异常: MCPClientWrapper.get_tool_info() missing 1 required positional argument: 'query'
2025-07-30 16:05:31.305 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:05:31.305 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 minimax-mcp-js 工具时发生异常: MCPClientWrapper.get_tool_info() missing 1 required positional argument: 'query'
2025-07-30 16:05:31.305 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:05:31.305 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 amap-maps 工具时发生异常: MCPClientWrapper.get_tool_info() missing 1 required positional argument: 'query'
2025-07-30 16:05:31.305 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:05:31.305 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 web3-rpc 工具时发生异常: MCPClientWrapper.get_tool_info() missing 1 required positional argument: 'query'
2025-07-30 16:05:31.305 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:05:31.305 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:05:31.305 | INFO     | __main__:remove_orphaned_tools:194 - 开始清理孤立的MCP工具...
2025-07-30 16:05:31.344 | INFO     | __main__:remove_orphaned_tools:235 - 未发现孤立的MCP工具
2025-07-30 16:05:59.925 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:05:59.925 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:05:59.952 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:05:59.952 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-30 16:05:59.952 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-30 16:05:59.952 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:05:59.953 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:05:59.953 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:05:59.953 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:05:59.953 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:05:59.953 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:05:59.953 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:05:59.954 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:05:59.954 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:05:59.954 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:05:59.954 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:05:59.954 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:05:59.954 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:05:59.955 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:05:59.955 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:05:59.955 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:05:59.955 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:05:59.955 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:05:59.955 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:05:59.956 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:05:59.956 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:05:59.956 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:05:59.956 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:05:59.956 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:05:59.956 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:05:59.956 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:05:59.956 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 16:05:59.957 | INFO     | __main__:main:257 - 检查MCP服务器状态...
2025-07-30 16:05:59.957 | WARNING  | __main__:main:268 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 16:05:59.957 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 16:05:59.957 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 16:05:59.958 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 16:05:59.961 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 16:05:59.962 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 16:06:04.969 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 7150)
2025-07-30 16:06:04.969 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 7152)
2025-07-30 16:06:16.479 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 7146)
2025-07-30 16:06:16.480 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 7148)
2025-07-30 16:06:16.480 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:06:16.480 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:06:16.480 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:06:16.480 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:06:16.480 | INFO     | __main__:main:281 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:06:16.480 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:06:16.480 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:06:16.480 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:06:16.481 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:06:16.481 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 playwright 工具时发生异常: 'MCPClientWrapper' object has no attribute 'get_server_tools'
2025-07-30 16:06:16.481 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:06:16.481 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 minimax-mcp-js 工具时发生异常: 'MCPClientWrapper' object has no attribute 'get_server_tools'
2025-07-30 16:06:16.481 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:06:16.481 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 amap-maps 工具时发生异常: 'MCPClientWrapper' object has no attribute 'get_server_tools'
2025-07-30 16:06:16.481 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:06:16.481 | ERROR    | __main__:sync_server_tools:144 - 同步服务器 web3-rpc 工具时发生异常: 'MCPClientWrapper' object has no attribute 'get_server_tools'
2025-07-30 16:06:16.481 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:06:16.481 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:06:16.481 | INFO     | __main__:remove_orphaned_tools:194 - 开始清理孤立的MCP工具...
2025-07-30 16:06:16.520 | INFO     | __main__:remove_orphaned_tools:235 - 未发现孤立的MCP工具
2025-07-30 16:06:53.142 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:06:53.143 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:06:53.168 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:06:53.168 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-30 16:06:53.168 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:06:53.169 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:06:53.170 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 16:06:53.170 | INFO     | __main__:main:257 - 检查MCP服务器状态...
2025-07-30 16:06:53.171 | WARNING  | __main__:main:268 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 16:06:53.171 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 16:06:53.171 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 16:06:53.172 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 16:06:53.174 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 16:06:53.175 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 16:06:58.181 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 9291)
2025-07-30 16:06:58.181 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 9293)
2025-07-30 16:07:09.691 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 9287)
2025-07-30 16:07:09.691 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 9289)
2025-07-30 16:07:09.691 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:07:09.691 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:07:09.691 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:07:09.692 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:07:09.692 | INFO     | __main__:main:281 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:07:09.692 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:07:09.692 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:07:09.692 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:07:09.692 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:07:09.692 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: playwright
2025-07-30 16:07:10.808 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: playwright
2025-07-30 16:07:10.808 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 playwright 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:07:10.808 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 playwright 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:07:10.808 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:07:10.808 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: minimax-mcp-js
2025-07-30 16:07:11.503 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: minimax-mcp-js
2025-07-30 16:07:11.504 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 minimax-mcp-js 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:07:11.504 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 minimax-mcp-js 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:07:11.504 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:07:11.504 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-30 16:07:11.955 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-30 16:07:11.955 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 amap-maps 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:07:11.955 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 amap-maps 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:07:11.955 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:07:11.956 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: web3-rpc
2025-07-30 16:07:15.477 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: web3-rpc
2025-07-30 16:07:15.477 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 web3-rpc 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:07:15.477 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 web3-rpc 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:07:15.477 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:07:15.477 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:07:15.477 | INFO     | __main__:remove_orphaned_tools:194 - 开始清理孤立的MCP工具...
2025-07-30 16:07:15.519 | INFO     | __main__:remove_orphaned_tools:235 - 未发现孤立的MCP工具
2025-07-30 16:07:54.738 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:07:54.738 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:07:54.763 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:07:54.763 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-30 16:07:54.763 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-30 16:07:54.763 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:07:54.763 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:07:54.763 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:07:54.764 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:07:54.765 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:07:54.765 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:07:54.765 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:07:54.765 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:07:54.765 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:07:54.765 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:07:54.765 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:07:54.765 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:07:54.765 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 16:07:54.766 | INFO     | __main__:main:257 - 检查MCP服务器状态...
2025-07-30 16:07:54.766 | WARNING  | __main__:main:268 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 16:07:54.766 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 16:07:54.766 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 16:07:54.767 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 16:07:54.769 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 16:07:54.770 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 16:07:59.776 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 12011)
2025-07-30 16:07:59.777 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 12013)
2025-07-30 16:08:11.290 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 12007)
2025-07-30 16:08:11.290 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 12009)
2025-07-30 16:08:11.290 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:08:11.290 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:08:11.290 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:08:11.290 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:08:11.291 | INFO     | __main__:main:281 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:08:11.291 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:08:11.291 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:08:11.291 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:08:11.291 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:08:11.291 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: playwright
2025-07-30 16:08:12.321 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: playwright
2025-07-30 16:08:12.321 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 playwright 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:08:12.321 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 playwright 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:08:12.321 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:08:12.321 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: minimax-mcp-js
2025-07-30 16:08:12.998 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: minimax-mcp-js
2025-07-30 16:08:12.998 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 minimax-mcp-js 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:08:12.998 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 minimax-mcp-js 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:08:12.998 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:08:12.998 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-30 16:08:13.459 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-30 16:08:13.460 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 amap-maps 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:08:13.460 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 amap-maps 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:08:13.460 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:08:13.460 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: web3-rpc
2025-07-30 16:08:16.941 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: web3-rpc
2025-07-30 16:08:16.941 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 web3-rpc 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:08:16.941 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 web3-rpc 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:08:16.942 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:08:16.942 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:08:16.942 | INFO     | __main__:remove_orphaned_tools:194 - 开始清理孤立的MCP工具...
2025-07-30 16:08:16.983 | INFO     | __main__:remove_orphaned_tools:235 - 未发现孤立的MCP工具
2025-07-30 16:09:13.974 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:09:13.974 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:09:14.000 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:09:14.001 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 16:09:14.002 | INFO     | __main__:main:248 - 检查MCP服务器状态...
2025-07-30 16:09:14.002 | WARNING  | __main__:main:259 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 16:09:14.002 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 16:09:14.002 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 16:09:14.003 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 16:09:14.005 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 16:09:14.006 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 16:09:19.014 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 15300)
2025-07-30 16:09:19.014 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 15302)
2025-07-30 16:09:30.524 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 15296)
2025-07-30 16:09:30.524 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 15298)
2025-07-30 16:09:30.524 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:09:30.524 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:09:30.524 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:09:30.524 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:09:30.524 | INFO     | __main__:main:272 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:09:30.525 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:09:30.525 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:09:30.525 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:09:30.525 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:09:30.525 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: playwright
2025-07-30 16:09:31.605 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: playwright
2025-07-30 16:09:31.605 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 playwright 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:09:31.605 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 playwright 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:09:31.605 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:09:31.605 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: minimax-mcp-js
2025-07-30 16:09:32.320 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: minimax-mcp-js
2025-07-30 16:09:32.320 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 minimax-mcp-js 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:09:32.320 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 minimax-mcp-js 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:09:32.321 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:09:32.321 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-30 16:09:32.810 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-30 16:09:32.811 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 amap-maps 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:09:32.811 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 amap-maps 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:09:32.811 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:09:32.811 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: web3-rpc
2025-07-30 16:09:36.363 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: web3-rpc
2025-07-30 16:09:36.363 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 web3-rpc 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:09:36.363 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 web3-rpc 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:09:36.363 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:09:36.363 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:09:36.363 | INFO     | __main__:remove_orphaned_tools:185 - 开始清理孤立的MCP工具...
2025-07-30 16:09:36.405 | INFO     | __main__:remove_orphaned_tools:226 - 未发现孤立的MCP工具
2025-07-30 16:09:49.008 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:09:49.008 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:09:49.033 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:09:49.034 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 16:09:49.035 | INFO     | __main__:main:248 - 检查MCP服务器状态...
2025-07-30 16:09:49.035 | WARNING  | __main__:main:259 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 16:09:49.035 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 16:09:49.035 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 16:09:49.036 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 16:09:49.038 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 16:09:49.039 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 16:09:54.044 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 17264)
2025-07-30 16:09:54.045 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 17266)
2025-07-30 16:10:05.554 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 17260)
2025-07-30 16:10:05.554 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 17262)
2025-07-30 16:10:05.554 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:10:05.555 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:10:05.555 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:10:05.555 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:10:05.555 | INFO     | __main__:main:272 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:10:05.555 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:10:05.555 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:10:05.555 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:10:05.555 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:10:05.555 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: playwright
2025-07-30 16:10:06.638 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: playwright
2025-07-30 16:10:06.638 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 playwright 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:10:06.638 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 playwright 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:10:06.638 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:10:06.638 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: minimax-mcp-js
2025-07-30 16:10:07.319 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: minimax-mcp-js
2025-07-30 16:10:07.319 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 minimax-mcp-js 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:10:07.319 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 minimax-mcp-js 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:10:07.320 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:10:07.320 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-30 16:10:07.777 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-30 16:10:07.778 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 amap-maps 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:10:07.778 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 amap-maps 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:10:07.778 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:10:07.778 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: web3-rpc
2025-07-30 16:10:11.177 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: web3-rpc
2025-07-30 16:10:11.177 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 web3-rpc 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:10:11.177 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 web3-rpc 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:10:11.177 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:10:11.177 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:10:11.177 | INFO     | __main__:remove_orphaned_tools:185 - 开始清理孤立的MCP工具...
2025-07-30 16:10:11.218 | INFO     | __main__:remove_orphaned_tools:226 - 未发现孤立的MCP工具
2025-07-30 16:10:44.402 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:10:44.402 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:10:44.428 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:10:44.429 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 16:10:44.430 | INFO     | __main__:main:251 - 检查MCP服务器状态...
2025-07-30 16:10:44.430 | WARNING  | __main__:main:262 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 16:10:44.430 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 16:10:44.430 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 16:10:44.431 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 16:10:44.433 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 16:10:44.434 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 16:10:49.441 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 19797)
2025-07-30 16:10:49.441 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 19799)
2025-07-30 16:11:00.953 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 19793)
2025-07-30 16:11:00.953 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 19795)
2025-07-30 16:11:00.953 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:11:00.954 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:11:00.954 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:11:00.954 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:11:00.954 | INFO     | __main__:main:275 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:11:00.954 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:11:00.954 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:11:00.954 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:11:00.954 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:11:00.954 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: playwright
2025-07-30 16:11:02.046 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: playwright
2025-07-30 16:11:02.046 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 playwright 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:11:02.046 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 playwright 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:11:02.046 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:11:02.046 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: minimax-mcp-js
2025-07-30 16:11:02.727 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: minimax-mcp-js
2025-07-30 16:11:02.727 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 minimax-mcp-js 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:11:02.727 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 minimax-mcp-js 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:11:02.727 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:11:02.727 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-30 16:11:03.188 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-30 16:11:03.189 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 amap-maps 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:11:03.189 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 amap-maps 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:11:03.189 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:11:03.189 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: web3-rpc
2025-07-30 16:11:06.653 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: web3-rpc
2025-07-30 16:11:06.654 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 web3-rpc 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:11:06.654 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 web3-rpc 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:11:06.654 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:11:06.654 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:11:06.654 | INFO     | __main__:remove_orphaned_tools:188 - 开始清理孤立的MCP工具...
2025-07-30 16:11:06.696 | INFO     | __main__:remove_orphaned_tools:229 - 未发现孤立的MCP工具
2025-07-30 16:11:25.649 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:11:25.649 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:11:25.675 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:11:25.676 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:11:25.677 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 16:11:25.677 | INFO     | __main__:main:251 - 检查MCP服务器状态...
2025-07-30 16:11:25.677 | WARNING  | __main__:main:262 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 16:11:25.677 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 16:11:25.677 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 16:11:25.678 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 16:11:25.680 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 16:11:25.681 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 16:11:30.688 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 21952)
2025-07-30 16:11:30.689 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 21954)
2025-07-30 16:11:42.200 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 21948)
2025-07-30 16:11:42.200 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 21950)
2025-07-30 16:11:42.201 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:11:42.201 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:11:42.201 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:11:42.201 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:11:42.201 | INFO     | __main__:main:275 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:11:42.201 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:11:42.201 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:11:42.201 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:11:42.201 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:11:42.201 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: playwright
2025-07-30 16:11:43.268 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: playwright
2025-07-30 16:11:43.269 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 playwright 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:11:43.269 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 playwright 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:11:43.269 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:11:43.269 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: minimax-mcp-js
2025-07-30 16:11:43.951 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: minimax-mcp-js
2025-07-30 16:11:43.951 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 minimax-mcp-js 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:11:43.951 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 minimax-mcp-js 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:11:43.951 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:11:43.952 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-30 16:11:44.413 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-30 16:11:44.414 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 amap-maps 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:11:44.414 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 amap-maps 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:11:44.414 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:11:44.414 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: web3-rpc
2025-07-30 16:11:47.877 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: web3-rpc
2025-07-30 16:11:47.877 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 web3-rpc 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:11:47.877 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 web3-rpc 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:11:47.877 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:11:47.877 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:11:47.877 | INFO     | __main__:remove_orphaned_tools:188 - 开始清理孤立的MCP工具...
2025-07-30 16:11:47.916 | INFO     | __main__:remove_orphaned_tools:229 - 未发现孤立的MCP工具
2025-07-30 16:11:58.124 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:11:58.124 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:11:58.149 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:11:58.150 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:11:58.151 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-30 16:11:58.152 | INFO     | __main__:main:251 - 检查MCP服务器状态...
2025-07-30 16:11:58.152 | WARNING  | __main__:main:262 - 没有运行中的MCP服务器，尝试启动...
2025-07-30 16:11:58.152 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-30 16:11:58.152 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-30 16:11:58.153 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-30 16:11:58.155 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-30 16:11:58.156 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-30 16:12:03.162 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 23729)
2025-07-30 16:12:03.162 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 23731)
2025-07-30 16:12:14.675 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 23725)
2025-07-30 16:12:14.676 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 23727)
2025-07-30 16:12:14.676 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-30 16:12:14.676 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-30 16:12:14.676 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-30 16:12:14.676 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-07-30 16:12:14.676 | INFO     | __main__:main:275 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-07-30 16:12:14.676 | INFO     | app.utils.mcp_client:__init__:84 - MCP客户端包装器：配置加载成功
2025-07-30 16:12:14.676 | INFO     | app.utils.mcp_client:__init__:86 - 已加载 4 个MCP服务器配置
2025-07-30 16:12:14.676 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-07-30 16:12:14.676 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-07-30 16:12:14.677 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: playwright
2025-07-30 16:12:15.736 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: playwright
2025-07-30 16:12:15.737 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 playwright 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:12:15.737 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 playwright 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:12:15.737 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-07-30 16:12:15.737 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: minimax-mcp-js
2025-07-30 16:12:16.421 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: minimax-mcp-js
2025-07-30 16:12:16.421 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 minimax-mcp-js 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:12:16.421 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 minimax-mcp-js 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:12:16.421 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-07-30 16:12:16.421 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-30 16:12:16.888 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-30 16:12:16.888 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 amap-maps 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:12:16.888 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 amap-maps 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:12:16.889 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-07-30 16:12:16.889 | INFO     | app.utils.mcp_client:_get_or_create_client:118 - 创建新的MCP客户端实例并连接到服务器: web3-rpc
2025-07-30 16:12:20.302 | INFO     | app.utils.mcp_client:_get_or_create_client:125 - 成功连接到MCP服务器并加入连接池: web3-rpc
2025-07-30 16:12:20.302 | ERROR    | app.utils.mcp_client:get_server_tools:227 - 获取服务器 web3-rpc 工具信息时发生错误: 'list' object has no attribute 'items'
2025-07-30 16:12:20.302 | ERROR    | __main__:sync_server_tools:108 - 获取服务器 web3-rpc 工具信息失败: 获取工具信息失败: 'list' object has no attribute 'items'
2025-07-30 16:12:20.302 | INFO     | __main__:sync_all_tools:85 - MCP工具同步完成: 处理了 4 个服务器
2025-07-30 16:12:20.303 | INFO     | __main__:sync_all_tools:86 - 同步统计: 新增 0 个，更新 0 个，失败 4 个
2025-07-30 16:12:20.303 | INFO     | __main__:remove_orphaned_tools:188 - 开始清理孤立的MCP工具...
2025-07-30 16:12:20.346 | INFO     | __main__:remove_orphaned_tools:229 - 未发现孤立的MCP工具
2025-07-30 16:13:27.925 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-30 16:13:27.925 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-30 16:13:27.951 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-30 16:13:27.951 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-30 16:13:27.951 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-30 16:13:27.951 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-30 16:13:27.951 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-30 16:13:27.951 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-30 16:13:27.951 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-30 16:13:27.951 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-30 16:13:27.952 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-30 16:13:27.953 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-30 16:13:27.953 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-30 16:13:27.953 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-30 16:13:27.953 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-31 17:26:46.490 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-31 17:26:46.491 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-31 17:26:46.516 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-31 17:26:46.516 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-31 17:26:46.516 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-31 17:26:46.516 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-31 17:26:46.516 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-31 17:26:46.516 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-31 17:26:46.516 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-31 17:26:46.516 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-31 17:26:46.517 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-31 17:26:46.518 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-31 18:38:29.016 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-31 18:38:29.016 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-31 18:38:29.043 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-31 18:38:29.043 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-31 18:38:29.043 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-31 18:38:29.043 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-31 18:38:29.043 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-31 18:38:29.043 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-31 18:38:29.043 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-31 18:38:29.043 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-31 18:38:29.044 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-31 18:38:29.045 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-31 18:38:29.046 | INFO     | backend.app.utils.mcp_client:<module>:36 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-07-31 18:38:29.046 | INFO     | backend.app.utils.mcp_client:<module>:37 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-07-31 18:38:29.077 | INFO     | backend.app.utils.mcp_client:<module>:54 - 成功导入MCP客户端库
2025-07-31 18:38:29.077 | INFO     | backend.app.utils.mcp_client:__init__:85 - MCP客户端包装器：配置加载成功
2025-07-31 18:38:29.077 | INFO     | backend.app.utils.mcp_client:__init__:87 - 已加载 4 个MCP服务器配置
2025-07-31 18:38:29.078 | INFO     | backend.app.utils.mcp_client:__init__:85 - MCP客户端包装器：配置加载成功
2025-07-31 18:38:29.078 | INFO     | backend.app.utils.mcp_client:__init__:87 - 已加载 4 个MCP服务器配置
2025-07-31 18:38:29.078 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:119 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-31 18:38:29.531 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:126 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-31 18:38:29.531 | INFO     | backend.app.utils.mcp_client:execute_tool:278 - 准备通过MCP客户端 ('amap-maps') 执行工具: tool=maps_weather, params={'city': '深圳'}
2025-07-31 18:38:29.728 | INFO     | backend.app.utils.mcp_client:execute_tool:311 - MCP客户端执行工具成功: tool=maps_weather
2025-07-31 18:40:59.531 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-31 18:40:59.531 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-31 18:40:59.558 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-31 18:40:59.558 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-31 18:40:59.558 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-31 18:40:59.558 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-31 18:40:59.558 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-31 18:40:59.558 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-31 18:40:59.558 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-31 18:40:59.558 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-31 18:40:59.559 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-31 18:40:59.560 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-31 18:40:59.560 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-31 18:40:59.560 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-31 18:40:59.560 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-31 18:40:59.560 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-31 18:40:59.560 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-31 18:40:59.561 | INFO     | backend.app.utils.mcp_client:<module>:36 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-07-31 18:40:59.561 | INFO     | backend.app.utils.mcp_client:<module>:37 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-07-31 18:40:59.592 | INFO     | backend.app.utils.mcp_client:<module>:54 - 成功导入MCP客户端库
2025-07-31 18:40:59.592 | INFO     | backend.app.utils.mcp_client:__init__:85 - MCP客户端包装器：配置加载成功
2025-07-31 18:40:59.592 | INFO     | backend.app.utils.mcp_client:__init__:87 - 已加载 4 个MCP服务器配置
2025-07-31 18:40:59.592 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:119 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-31 18:41:00.064 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:126 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-31 18:41:00.064 | INFO     | backend.app.utils.mcp_client:execute_tool:278 - 准备通过MCP客户端 ('amap-maps') 执行工具: tool=maps_weather, params={'city': '深圳'}
2025-07-31 18:41:00.247 | INFO     | backend.app.utils.mcp_client:execute_tool:311 - MCP客户端执行工具成功: tool=maps_weather
2025-07-31 18:41:00.270 | INFO     | backend.app.utils.db:create_db_engine:53 - 数据库连接成功
2025-07-31 18:41:00.270 | INFO     | backend.app.utils.db:create_async_db_engine:120 - 数据库URL已转换为异步兼容: mysql+aiomysql://root:b9clqt26@test-db-mysql.ns-6dvkv8ga.svc:3306/ai_assistant
2025-07-31 18:41:00.271 | INFO     | backend.app.utils.db:create_async_db_engine:141 - 异步数据库引擎创建成功
2025-07-31 18:41:00.289 | INFO     | backend.app.utils.db:create_db_engine:53 - 数据库连接成功
2025-07-31 18:54:14.177 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-31 18:54:14.177 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-31 18:54:14.210 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-31 18:54:14.210 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-31 18:54:14.210 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-31 18:54:14.210 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-31 18:54:14.210 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-31 18:54:14.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-31 18:54:14.212 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-31 18:54:14.212 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-31 18:54:14.212 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-31 18:54:14.212 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-31 18:54:14.212 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-31 18:54:14.212 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-31 18:54:14.212 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-31 18:54:14.212 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-31 18:54:14.212 | INFO     | backend.app.utils.mcp_client:<module>:36 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-07-31 18:54:14.213 | INFO     | backend.app.utils.mcp_client:<module>:37 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-07-31 18:54:14.243 | INFO     | backend.app.utils.mcp_client:<module>:54 - 成功导入MCP客户端库
2025-07-31 18:54:14.244 | INFO     | backend.app.utils.mcp_client:__init__:85 - MCP客户端包装器：配置加载成功
2025-07-31 18:54:14.244 | INFO     | backend.app.utils.mcp_client:__init__:87 - 已加载 4 个MCP服务器配置
2025-07-31 18:54:14.244 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:112 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-31 18:54:14.721 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:119 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-31 18:54:14.721 | INFO     | backend.app.utils.mcp_client:execute_tool:271 - 准备通过MCP客户端 ('amap-maps') 执行工具: tool=maps_weather, params={'city': '深圳'}
2025-07-31 18:54:14.910 | INFO     | backend.app.utils.mcp_client:execute_tool:304 - MCP客户端执行工具成功: tool=maps_weather
2025-07-31 18:54:14.931 | INFO     | backend.app.utils.db:create_db_engine:53 - 数据库连接成功
2025-07-31 18:54:14.932 | INFO     | backend.app.utils.db:create_async_db_engine:120 - 数据库URL已转换为异步兼容: mysql+aiomysql://root:b9clqt26@test-db-mysql.ns-6dvkv8ga.svc:3306/ai_assistant
2025-07-31 18:54:14.932 | INFO     | backend.app.utils.db:create_async_db_engine:141 - 异步数据库引擎创建成功
2025-07-31 18:54:14.950 | INFO     | backend.app.utils.db:create_db_engine:53 - 数据库连接成功
2025-07-31 19:00:30.318 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-31 19:00:30.318 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-31 19:00:30.344 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-31 19:00:30.344 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-31 19:00:30.345 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-31 19:00:30.346 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-31 19:00:30.347 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-31 19:00:30.347 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-31 19:00:30.347 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-31 19:00:30.347 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-31 19:00:30.347 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-31 19:00:30.347 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-31 19:00:30.347 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-31 19:00:30.348 | INFO     | backend.app.utils.mcp_client:<module>:36 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-07-31 19:00:30.348 | INFO     | backend.app.utils.mcp_client:<module>:37 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-07-31 19:00:30.380 | INFO     | backend.app.utils.mcp_client:<module>:54 - 成功导入MCP客户端库
2025-07-31 19:00:30.380 | INFO     | backend.app.utils.mcp_client:__init__:85 - MCP客户端包装器：配置加载成功
2025-07-31 19:00:30.380 | INFO     | backend.app.utils.mcp_client:__init__:87 - 已加载 4 个MCP服务器配置
2025-07-31 19:00:30.380 | INFO     | backend.app.utils.mcp_client:__init__:85 - MCP客户端包装器：配置加载成功
2025-07-31 19:00:30.380 | INFO     | backend.app.utils.mcp_client:__init__:87 - 已加载 4 个MCP服务器配置
2025-07-31 19:00:30.381 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:112 - 创建新的MCP客户端实例并连接到服务器: amap-maps
2025-07-31 19:00:30.850 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:119 - 成功连接到MCP服务器并加入连接池: amap-maps
2025-07-31 19:00:30.850 | INFO     | backend.app.utils.mcp_client:execute_tool:271 - 准备通过MCP客户端 ('amap-maps') 执行工具: tool=maps_weather, params={'city': '深圳'}
2025-07-31 19:00:31.029 | INFO     | backend.app.utils.mcp_client:execute_tool:304 - MCP客户端执行工具成功: tool=maps_weather
2025-07-31 20:49:56.132 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-31 20:49:56.132 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-31 20:49:56.157 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-31 20:49:56.157 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-31 20:49:56.158 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-31 20:49:56.159 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-31 20:49:56.159 | INFO     | app.services.mcp_manager:start_all_servers:368 - 开始启动所有MCP服务器...
2025-07-31 20:49:56.160 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: playwright
2025-07-31 20:49:56.161 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: minimax-mcp-js
2025-07-31 20:49:56.163 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: amap-maps
2025-07-31 20:49:56.164 | INFO     | app.services.mcp_manager:start_server:87 - 正在启动MCP服务器: web3-rpc
2025-07-31 20:50:01.170 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 amap-maps 启动成功 (PID: 49880)
2025-07-31 20:50:01.171 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 web3-rpc 启动成功 (PID: 49883)
2025-07-31 20:50:12.682 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 playwright 启动成功 (PID: 49876)
2025-07-31 20:50:12.683 | INFO     | app.services.mcp_manager:start_server:221 - MCP服务器 minimax-mcp-js 启动成功 (PID: 49878)
2025-07-31 20:50:12.683 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 playwright 启动成功
2025-07-31 20:50:12.683 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 minimax-mcp-js 启动成功
2025-07-31 20:50:12.683 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 amap-maps 启动成功
2025-07-31 20:50:12.683 | INFO     | app.services.mcp_manager:start_all_servers:381 - ✅ 服务器 web3-rpc 启动成功
2025-08-03 08:12:00.269 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 08:12:00.270 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 08:12:00.295 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 08:12:00.296 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 08:12:00.296 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 08:12:00.296 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 08:12:00.296 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 08:12:00.296 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 08:12:00.296 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 08:12:00.296 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 08:12:00.296 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 08:12:00.296 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 08:12:00.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 08:12:00.298 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 08:12:00.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 08:12:00.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 08:12:00.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 08:12:00.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 08:12:00.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 08:12:00.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 08:12:00.298 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 08:12:00.299 | INFO     | __main__:restart_amap_maps:21 - 开始重启amap-maps MCP服务器...
2025-08-03 08:12:00.299 | INFO     | app.services.mcp_manager:reset_server_failures:750 - 已重置服务器 amap-maps 的失败状态
2025-08-03 08:12:00.311 | INFO     | app.services.mcp_manager:start_server:312 - 正在启动MCP服务器: amap-maps
2025-08-03 08:12:00.311 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:138 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 08:12:05.319 | INFO     | app.services.mcp_manager:start_server:461 - MCP服务器 amap-maps 启动成功 (PID: 16430)
2025-08-03 08:12:05.319 | INFO     | __main__:restart_amap_maps:30 - ✅ amap-maps MCP服务器重启成功
2025-08-03 08:12:05.319 | INFO     | __main__:restart_amap_maps:34 - 服务器状态: running=True, restart_count=1
2025-08-03 08:18:37.445 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 08:18:37.446 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 08:18:37.471 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 08:18:37.471 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 08:18:37.472 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 08:18:37.473 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 08:18:37.474 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 08:18:37.474 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 08:18:37.474 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 08:18:37.474 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 08:18:37.474 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 08:18:37.474 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 08:18:37.475 | INFO     | app.services.mcp_manager:_load_server_configs:67 - 已加载 4 个MCP服务器配置
2025-08-03 08:18:37.488 | INFO     | app.services.mcp_manager:start_server:312 - 正在启动MCP服务器: amap-maps
2025-08-03 08:18:37.488 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:138 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 08:18:42.495 | INFO     | app.services.mcp_manager:start_server:461 - MCP服务器 amap-maps 启动成功 (PID: 17964)
2025-08-03 08:18:59.851 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 08:18:59.851 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 08:18:59.879 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 08:18:59.880 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 08:18:59.881 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 08:18:59.881 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 08:18:59.881 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 08:18:59.881 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 08:18:59.881 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 08:18:59.881 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 08:18:59.881 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 08:18:59.882 | INFO     | app.services.mcp_manager:_load_server_configs:67 - 已加载 4 个MCP服务器配置
2025-08-03 08:18:59.895 | INFO     | app.services.mcp_manager:start_server:312 - 正在启动MCP服务器: amap-maps
2025-08-03 08:18:59.896 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:138 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 08:19:04.902 | INFO     | app.services.mcp_manager:start_server:461 - MCP服务器 amap-maps 启动成功 (PID: 18042)
2025-08-03 08:19:27.436 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 08:19:27.436 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 08:19:27.462 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 08:19:27.462 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 08:19:27.463 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 08:19:27.464 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 08:19:27.465 | INFO     | app.services.mcp_manager:_load_server_configs:67 - 已加载 4 个MCP服务器配置
2025-08-03 08:19:27.477 | INFO     | app.services.mcp_manager:start_server:312 - 正在启动MCP服务器: amap-maps
2025-08-03 08:19:27.478 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:138 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 08:19:32.485 | INFO     | app.services.mcp_manager:start_server:461 - MCP服务器 amap-maps 启动成功 (PID: 18286)
2025-08-03 09:51:55.269 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 09:51:55.270 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 09:51:55.296 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 09:51:55.296 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 09:51:55.296 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 09:51:55.296 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 09:51:55.296 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 09:51:55.296 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 09:51:55.297 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 09:51:55.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 09:51:55.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 09:51:55.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 09:51:55.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 09:51:55.298 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 09:51:55.298 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 09:51:55.298 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 09:51:56.001 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 09:51:56.001 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 09:53:15.116 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 09:53:15.117 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 09:53:15.142 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 09:53:15.142 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 09:53:15.143 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 09:53:15.144 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 09:53:15.145 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 09:53:15.747 | INFO     | app.services.mcp_manager:add_alert_rule:1615 - 告警规则已添加: test_custom_rule
2025-08-03 09:53:15.747 | INFO     | app.services.mcp_manager:remove_alert_rule:1625 - 告警规则已移除: test_custom_rule
2025-08-03 09:53:15.848 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 09:53:15.848 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 10:07:29.883 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:07:29.883 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:07:29.908 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:07:29.908 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:07:29.908 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:07:29.908 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:07:29.908 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:07:29.908 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:07:29.909 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:07:29.910 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:07:29.910 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:07:29.910 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:07:29.910 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:07:29.910 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:07:29.910 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:07:40.330 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:07:40.330 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:07:40.355 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:07:40.356 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:07:40.357 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:09:45.493 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:09:45.494 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:09:45.528 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:09:45.528 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:09:45.528 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:09:45.529 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:09:45.530 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:09:45.531 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:09:45.531 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 10:09:45.531 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 10:09:45.538 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:09:45.538 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:09:50.545 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35019)
2025-08-03 10:10:37.836 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:10:37.836 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:10:37.862 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:10:37.863 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:10:37.864 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:10:37.864 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:10:37.864 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:10:37.864 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:10:37.864 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:10:37.864 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:10:37.864 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:10:37.864 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:10:37.864 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:10:37.865 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 10:10:37.865 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 10:10:37.870 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:10:37.870 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:10:42.878 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35173)
2025-08-03 10:10:42.887 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:10:42.887 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 10:10:42.887 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 1 次重试，延迟 0.97 秒...
2025-08-03 10:10:43.854 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 10:10:43.863 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:10:43.863 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 59.0 秒），跳过重启
2025-08-03 10:10:43.863 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 2 次重试，延迟 1.97 秒...
2025-08-03 10:10:45.839 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 10:10:45.844 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:10:45.844 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 57.0 秒），跳过重启
2025-08-03 10:10:45.845 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 3 次重试，延迟 4.17 秒...
2025-08-03 10:10:50.621 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:10:50.621 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:10:50.646 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:10:50.647 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:10:50.648 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 10:10:50.648 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 10:10:50.652 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:10:50.653 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:10:55.659 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35254)
2025-08-03 10:10:55.664 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:10:55.664 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 10:10:55.665 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 1 次重试，延迟 1.00 秒...
2025-08-03 10:10:56.670 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 10:10:56.675 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:10:56.675 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 59.0 秒），跳过重启
2025-08-03 10:10:56.675 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 2 次重试，延迟 1.97 秒...
2025-08-03 10:10:58.647 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 10:10:58.653 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:10:58.654 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 57.0 秒），跳过重启
2025-08-03 10:10:58.654 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 3 次重试，延迟 3.93 秒...
2025-08-03 10:11:02.589 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 10:11:02.589 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 10:11:04.596 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:11:04.596 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:11:09.603 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35347)
2025-08-03 10:11:09.608 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:11:09.608 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 10:11:09.608 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 4 次重试，延迟 8.17 秒...
2025-08-03 10:11:17.787 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 10:11:17.787 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 10:11:19.793 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:11:19.794 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:11:24.800 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35403)
2025-08-03 10:11:24.809 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:11:24.809 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 10:11:24.810 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'amap-maps' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 10:11:24.810 | ERROR    | app.utils.mcp_client:get_server_tools:917 - 获取服务器 amap-maps 工具信息时发生错误: 连接到MCP服务器 'amap-maps' 失败: 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps
2025-08-03 10:11:51.724 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:11:51.724 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:11:51.750 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:11:51.750 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:11:51.750 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:11:51.750 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:11:51.750 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:11:51.750 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:11:51.751 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:11:51.752 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:11:51.752 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:11:51.752 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:11:51.752 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:11:51.752 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:11:51.752 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:11:51.752 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 10:11:51.753 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: False)
2025-08-03 10:11:53.760 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:11:53.760 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:11:58.766 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35544)
2025-08-03 10:12:15.309 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:12:15.310 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:12:15.335 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:12:15.335 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:12:15.335 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:12:15.335 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:12:15.335 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:12:15.335 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:12:15.335 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:12:15.336 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:12:15.337 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:12:15.337 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:12:15.337 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:12:15.337 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:12:15.337 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:12:15.337 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 10:12:15.338 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 10:12:15.338 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 10:12:15.342 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:12:15.347 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:12:15.347 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:12:20.353 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35621)
2025-08-03 10:12:21.171 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: amap-maps
2025-08-03 10:12:21.172 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'amap-maps' 失败 (尝试 1/5): 连接验证失败: amap-maps，0.99 秒后重试...
2025-08-03 10:12:22.163 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 10:12:22.170 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:12:22.170 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 58.2 秒），跳过重启
2025-08-03 10:12:22.170 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 2 次重试，延迟 1.90 秒...
2025-08-03 10:12:24.075 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 10:12:24.081 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:12:24.081 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 56.3 秒），跳过重启
2025-08-03 10:12:24.081 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 3 次重试，延迟 3.89 秒...
2025-08-03 10:12:27.977 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 10:12:27.977 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 10:12:29.984 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:12:29.985 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:12:34.999 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35748)
2025-08-03 10:12:35.006 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:12:35.006 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 10:12:35.007 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 4 次重试，延迟 7.67 秒...
2025-08-03 10:12:42.683 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 10:12:42.683 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 10:12:44.689 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:12:44.690 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:12:49.708 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35812)
2025-08-03 10:12:49.715 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:12:49.716 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 10:12:49.716 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'amap-maps' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 10:12:49.716 | ERROR    | app.utils.mcp_client:get_server_tools:917 - 获取服务器 amap-maps 工具信息时发生错误: 连接到MCP服务器 'amap-maps' 失败: 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps
2025-08-03 10:13:21.668 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:13:21.668 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:13:21.694 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:13:21.694 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:13:21.694 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:13:21.695 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:13:21.696 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:13:21.697 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:13:21.697 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 10:13:21.697 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 10:13:21.701 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:13:21.706 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:13:21.706 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:13:26.712 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 35958)
2025-08-03 10:13:27.293 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: amap-maps
2025-08-03 10:13:27.293 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'amap-maps' 失败 (尝试 1/5): 连接验证失败: amap-maps，1.02 秒后重试...
2025-08-03 10:13:28.313 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 10:13:28.318 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:13:28.318 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 58.4 秒），跳过重启
2025-08-03 10:13:28.318 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 2 次重试，延迟 2.02 秒...
2025-08-03 10:13:30.337 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 10:13:30.342 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:13:30.342 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 56.4 秒），跳过重启
2025-08-03 10:13:30.342 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 3 次重试，延迟 4.14 秒...
2025-08-03 10:13:34.484 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 10:13:34.485 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 10:13:36.491 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:13:36.492 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:13:41.499 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 36085)
2025-08-03 10:13:41.504 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:13:41.505 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 10:13:41.505 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 4 次重试，延迟 8.17 秒...
2025-08-03 10:13:49.687 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 10:13:49.687 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 10:13:51.695 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:13:51.695 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:13:56.705 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 36145)
2025-08-03 10:13:56.714 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:13:56.714 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 10:13:56.714 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'amap-maps' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 10:13:56.714 | ERROR    | app.utils.mcp_client:get_server_tools:917 - 获取服务器 amap-maps 工具信息时发生错误: 连接到MCP服务器 'amap-maps' 失败: 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps
2025-08-03 10:20:18.468 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:20:18.468 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:20:18.493 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:20:18.494 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:20:18.495 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:20:18.496 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 10:20:18.501 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: playwright
2025-08-03 10:20:18.501 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 playwright 环境变量验证通过，已设置 0 个变量
2025-08-03 10:20:35.018 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 playwright 启动成功 (PID: 37258)
2025-08-03 10:20:35.024 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: minimax-mcp-js
2025-08-03 10:20:35.024 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 minimax-mcp-js 环境变量验证通过，已设置 4 个变量
2025-08-03 10:20:50.040 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:20:50.047 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:20:50.093 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:20:50.095 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:20:50.095 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:20:50.095 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:20:50.095 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:20:50.095 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:20:50.095 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:20:50.095 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:20:50.095 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:20:50.095 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:20:50.096 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:20:50.097 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:20:50.097 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:20:50.097 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:20:50.097 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:20:50.102 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 10:20:50.110 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: playwright
2025-08-03 10:20:50.110 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 playwright 环境变量验证通过，已设置 0 个变量
2025-08-03 10:20:53.122 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 minimax-mcp-js 启动成功 (PID: 37430)
2025-08-03 10:20:53.129 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:20:53.130 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:20:58.151 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 37570)
2025-08-03 10:20:58.157 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 61288)
2025-08-03 10:20:58.157 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 61288)，跳过启动
2025-08-03 10:23:26.225 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:23:26.225 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:23:26.252 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:23:26.253 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:23:26.254 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:23:26.255 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:23:26.255 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:23:26.256 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 10:23:26.256 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 10:23:28.272 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:23:28.273 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:23:46.160 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 38230)
2025-08-03 10:23:46.208 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 10:23:46.430 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 10:23:47.347 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 10:23:47.871 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:23:48.039 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:24:14.961 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 38302)
2025-08-03 10:24:17.368 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 amap-maps (PID: 38302)
2025-08-03 10:24:17.432 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: amap-maps (PID: 38302)
2025-08-03 10:24:24.114 | WARNING  | app.utils.mcp_client:_create_client_connection:514 - 创建客户端连接失败 amap-maps (尝试 1): 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)
2025-08-03 10:24:24.312 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'amap-maps' 失败 (尝试 1/5): 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)，0.99 秒后重试...
2025-08-03 10:24:25.838 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 10:24:27.458 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 amap-maps (PID: 38302)
2025-08-03 10:24:28.027 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: amap-maps (PID: 38302)
2025-08-03 10:24:36.459 | WARNING  | app.utils.mcp_client:_create_client_connection:514 - 创建客户端连接失败 amap-maps (尝试 2): 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)
2025-08-03 10:24:37.644 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'amap-maps' 失败 (尝试 2/5): 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)，2.03 秒后重试...
2025-08-03 10:24:40.311 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 10:24:40.329 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 amap-maps (PID: 38302)
2025-08-03 10:24:40.333 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: amap-maps (PID: 38302)
2025-08-03 10:24:46.920 | WARNING  | app.utils.mcp_client:_create_client_connection:514 - 创建客户端连接失败 amap-maps (尝试 3): 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)
2025-08-03 10:24:48.991 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'amap-maps' 失败 (尝试 3/5): 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)，3.85 秒后重试...
2025-08-03 10:24:56.100 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 10:24:56.558 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 amap-maps (PID: 38302)
2025-08-03 10:24:56.733 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 amap-maps 优雅关闭成功
2025-08-03 10:24:58.840 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 amap-maps (PID: 38513)
2025-08-03 10:24:58.885 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 amap-maps 已在运行 (PID: 38513)，跳过启动
2025-08-03 10:24:59.054 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 amap-maps (PID: 38513)
2025-08-03 10:24:59.080 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: amap-maps (PID: 38513)
2025-08-03 10:25:04.946 | WARNING  | app.utils.mcp_client:_create_client_connection:514 - 创建客户端连接失败 amap-maps (尝试 4): 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)
2025-08-03 10:25:05.589 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'amap-maps' 失败 (尝试 4/5): 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)，8.10 秒后重试...
2025-08-03 10:25:14.198 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 10:25:14.211 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 amap-maps (PID: 38513)
2025-08-03 10:25:14.215 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 amap-maps 时进程访问异常: process PID not found (pid=38513)
2025-08-03 10:25:16.277 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:25:16.537 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:25:38.814 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 38781)
2025-08-03 10:25:38.948 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 amap-maps (PID: 38781)
2025-08-03 10:25:39.981 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: amap-maps (PID: 38781)
2025-08-03 10:25:47.154 | WARNING  | app.utils.mcp_client:_create_client_connection:514 - 创建客户端连接失败 amap-maps (尝试 5): 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)
2025-08-03 10:25:47.759 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'amap-maps' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 10:25:48.523 | ERROR    | app.utils.mcp_client:get_server_tools:917 - 获取服务器 amap-maps 工具信息时发生错误: 连接到MCP服务器 'amap-maps' 失败: 连接到 MCP 服务器 amap-maps 超时 (5秒) (尝试复用进程 PID: 34268 失败)
2025-08-03 10:34:58.306 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:34:58.308 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:34:58.360 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:34:58.369 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:34:58.369 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:34:58.369 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:34:58.369 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:34:58.369 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:34:58.369 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:34:58.369 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:34:58.370 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:34:58.371 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:34:58.371 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:34:58.371 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:34:58.371 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:36:02.607 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:36:02.608 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:36:02.676 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:36:02.684 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:36:02.685 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:36:02.686 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:36:02.716 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 10:36:02.725 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 10:36:22.127 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 10:36:22.129 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 10:36:56.912 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:36:56.913 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:36:56.941 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:36:56.941 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:36:56.941 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:36:56.941 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:36:56.942 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:36:56.943 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:36:56.943 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:36:56.943 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:36:56.943 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:36:56.943 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:36:56.943 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:36:56.943 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:36:56.943 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:36:56.943 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:36:56.949 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: playwright
2025-08-03 10:36:56.949 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 playwright 环境变量验证通过，已设置 0 个变量
2025-08-03 10:37:15.339 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 playwright 启动成功 (PID: 41400)
2025-08-03 10:37:15.546 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: minimax-mcp-js
2025-08-03 10:37:15.989 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 minimax-mcp-js 环境变量验证通过，已设置 4 个变量
2025-08-03 10:37:32.529 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 minimax-mcp-js 启动成功 (PID: 41476)
2025-08-03 10:37:32.532 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 40424)
2025-08-03 10:37:32.532 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 40424)，跳过启动
2025-08-03 10:51:44.000 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:51:44.000 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:51:44.025 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:51:44.026 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:51:44.027 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:51:59.758 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:51:59.758 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:51:59.785 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:51:59.785 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:51:59.785 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:51:59.785 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:51:59.785 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:51:59.785 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:51:59.786 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:51:59.787 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:51:59.787 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:51:59.787 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:51:59.787 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:51:59.787 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:51:59.787 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:51:59.787 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 10:53:15.194 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:53:15.194 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:53:15.220 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:53:15.221 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:53:15.222 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 10:54:46.747 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:54:46.747 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:54:46.772 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:54:46.772 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:54:46.772 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:54:46.772 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:54:46.772 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:54:46.773 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:54:46.774 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:54:46.774 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:54:46.774 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:54:46.774 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:54:46.774 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:54:46.774 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:54:46.774 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:54:46.774 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:54:46.775 | INFO     | app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 10:54:46.783 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 10:54:46.783 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 playwright 已在运行 (PID: 43752)，跳过启动
2025-08-03 10:54:46.788 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: minimax-mcp-js
2025-08-03 10:54:46.788 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 minimax-mcp-js 环境变量验证通过，已设置 4 个变量
2025-08-03 10:55:03.306 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 minimax-mcp-js 启动成功 (PID: 51752)
2025-08-03 10:55:03.311 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 10:55:03.311 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 10:55:08.318 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 52445)
2025-08-03 10:55:08.324 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 10:55:08.324 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 10:55:13.330 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 52733)
2025-08-03 10:58:45.866 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:58:45.866 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:58:45.894 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:58:45.894 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 10:58:45.894 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 10:58:45.894 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:58:45.895 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:58:45.896 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:58:45.896 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:58:45.896 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:58:45.896 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:58:45.896 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:58:45.896 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:58:45.896 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:58:45.896 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:59:02.366 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 10:59:02.366 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 10:59:02.391 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 10:59:02.392 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 10:59:02.393 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 10:59:02.398 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 10:59:02.404 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 10:59:02.405 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 10:59:07.410 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 61015)
2025-08-03 10:59:07.416 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 61015)
2025-08-03 10:59:07.417 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 61015)
2025-08-03 10:59:10.810 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 10:59:10.811 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接验证失败: web3-rpc，0.96 秒后重试...
2025-08-03 10:59:11.769 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 10:59:11.774 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 61015)
2025-08-03 10:59:11.775 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 61015)
2025-08-03 10:59:15.742 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 10:59:15.742 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接验证失败: web3-rpc，2.08 秒后重试...
2025-08-03 10:59:17.825 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 10:59:17.830 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 61015)
2025-08-03 10:59:17.830 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 61015)
2025-08-03 10:59:21.994 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 10:59:21.995 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接验证失败: web3-rpc，4.14 秒后重试...
2025-08-03 10:59:26.134 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 10:59:26.135 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 61015)
2025-08-03 10:59:26.187 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 10:59:28.191 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 61733)
2025-08-03 10:59:28.191 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 61733)，跳过启动
2025-08-03 10:59:28.195 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 61733)
2025-08-03 10:59:28.196 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 61733)
2025-08-03 10:59:32.212 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 10:59:32.212 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接验证失败: web3-rpc，7.86 秒后重试...
2025-08-03 10:59:40.071 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 10:59:40.072 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 61733)
2025-08-03 10:59:40.072 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=61733)
2025-08-03 10:59:42.076 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 62161)
2025-08-03 10:59:42.076 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 62161)，跳过启动
2025-08-03 10:59:42.080 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 62161)
2025-08-03 10:59:42.080 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 62161)
2025-08-03 10:59:46.087 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 10:59:46.087 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 10:59:46.088 | ERROR    | app.utils.mcp_client:execute_tool:1020 - MCP客户端执行工具失败: tool=getAccountInfo, error=连接到MCP服务器 'web3-rpc' 失败: 连接验证失败: web3-rpc
2025-08-03 11:00:10.598 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:00:10.599 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:00:10.623 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:00:10.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:00:10.625 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:00:10.630 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:00:10.635 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:00:10.635 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:00:15.641 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 63757)
2025-08-03 11:00:15.646 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 63757)
2025-08-03 11:00:15.646 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 63757)
2025-08-03 11:00:19.120 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:00:19.120 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接验证失败: web3-rpc，0.99 秒后重试...
2025-08-03 11:00:20.109 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:00:20.114 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 63757)
2025-08-03 11:00:20.114 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 63757)
2025-08-03 11:00:23.989 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:00:23.989 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接验证失败: web3-rpc，2.06 秒后重试...
2025-08-03 11:00:26.048 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 11:00:26.053 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 63757)
2025-08-03 11:00:26.053 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 63757)
2025-08-03 11:00:30.014 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:00:30.015 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接验证失败: web3-rpc，4.11 秒后重试...
2025-08-03 11:00:34.127 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:00:34.127 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 63757)
2025-08-03 11:00:34.180 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 11:00:36.184 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 64459)
2025-08-03 11:00:36.184 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 64459)，跳过启动
2025-08-03 11:00:36.188 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 64459)
2025-08-03 11:00:36.189 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 64459)
2025-08-03 11:00:40.291 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:00:40.291 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接验证失败: web3-rpc，7.71 秒后重试...
2025-08-03 11:00:48.002 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:00:48.002 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 64459)
2025-08-03 11:00:48.002 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=64459)
2025-08-03 11:00:50.007 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 64925)
2025-08-03 11:00:50.007 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 64925)，跳过启动
2025-08-03 11:00:50.011 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 64925)
2025-08-03 11:00:50.011 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 64925)
2025-08-03 11:00:54.049 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:00:54.049 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:00:54.049 | ERROR    | app.utils.mcp_client:execute_tool:1020 - MCP客户端执行工具失败: tool=getAccountInfo, error=连接到MCP服务器 'web3-rpc' 失败: 连接验证失败: web3-rpc
2025-08-03 11:03:34.719 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:03:34.719 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:03:34.744 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:03:34.745 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:03:34.750 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:03:34.755 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:03:34.755 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:03:39.762 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 5555)
2025-08-03 11:03:39.763 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 5555)
2025-08-03 11:03:39.764 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 5555)
2025-08-03 11:03:43.118 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:03:43.118 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接验证失败: web3-rpc，1.02 秒后重试...
2025-08-03 11:03:44.144 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:03:44.146 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 5555)
2025-08-03 11:03:44.146 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 5555)
2025-08-03 11:03:48.100 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:03:48.101 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接验证失败: web3-rpc，2.07 秒后重试...
2025-08-03 11:03:50.171 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 11:03:50.173 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 5555)
2025-08-03 11:03:50.173 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 5555)
2025-08-03 11:03:54.242 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:03:54.242 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接验证失败: web3-rpc，3.83 秒后重试...
2025-08-03 11:03:58.071 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:03:58.071 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 5555)
2025-08-03 11:03:58.098 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 11:04:00.107 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 6163)
2025-08-03 11:04:00.108 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 6163)，跳过启动
2025-08-03 11:04:00.109 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 6163)
2025-08-03 11:04:00.110 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 6163)
2025-08-03 11:04:04.540 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:04:04.540 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接验证失败: web3-rpc，8.33 秒后重试...
2025-08-03 11:04:12.875 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:04:12.875 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 6163)
2025-08-03 11:04:12.875 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=6163)
2025-08-03 11:04:14.877 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 6510)
2025-08-03 11:04:14.877 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 6510)，跳过启动
2025-08-03 11:04:14.878 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 6510)
2025-08-03 11:04:14.878 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 6510)
2025-08-03 11:04:18.826 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:04:18.826 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:04:18.826 | ERROR    | app.utils.mcp_client:execute_tool:1031 - MCP客户端执行工具失败: tool=getAccountInfo, error=连接到MCP服务器 'web3-rpc' 失败: 连接验证失败: web3-rpc
2025-08-03 11:05:01.519 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:05:01.519 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:05:01.544 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:05:01.545 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:05:01.546 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:05:01.551 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:05:01.555 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:05:01.556 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:05:06.562 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 8424)
2025-08-03 11:05:06.564 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 8424)
2025-08-03 11:05:06.564 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 8424)
2025-08-03 11:05:09.942 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:05:09.942 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接验证失败: web3-rpc，1.03 秒后重试...
2025-08-03 11:05:10.973 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:05:10.976 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 8424)
2025-08-03 11:05:10.976 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 8424)
2025-08-03 11:05:14.926 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:05:14.926 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接验证失败: web3-rpc，2.09 秒后重试...
2025-08-03 11:05:17.014 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 11:05:17.016 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 8424)
2025-08-03 11:05:17.017 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 8424)
2025-08-03 11:05:21.078 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:05:21.078 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接验证失败: web3-rpc，4.11 秒后重试...
2025-08-03 11:05:25.191 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:05:25.191 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 8424)
2025-08-03 11:05:25.218 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 11:05:27.219 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 9082)
2025-08-03 11:05:27.220 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 9082)，跳过启动
2025-08-03 11:05:27.221 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 9082)
2025-08-03 11:05:27.221 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 9082)
2025-08-03 11:05:31.243 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:05:31.243 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接验证失败: web3-rpc，8.09 秒后重试...
2025-08-03 11:05:39.333 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:05:39.333 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 9082)
2025-08-03 11:05:39.333 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=9082)
2025-08-03 11:05:41.335 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 9468)
2025-08-03 11:05:41.335 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 9468)，跳过启动
2025-08-03 11:05:41.336 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 9468)
2025-08-03 11:05:41.337 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 9468)
2025-08-03 11:05:45.287 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:05:45.287 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:05:45.287 | ERROR    | app.utils.mcp_client:execute_tool:1041 - MCP客户端执行工具失败: tool=getAccountInfo, error=连接到MCP服务器 'web3-rpc' 失败: 连接验证失败: web3-rpc
2025-08-03 11:06:07.210 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:06:07.210 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:06:07.235 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:06:07.235 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:06:07.235 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:06:07.235 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:06:07.235 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:06:07.235 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:06:07.235 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:06:07.235 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:06:07.235 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:06:07.236 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:06:07.237 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:06:07.242 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:06:07.246 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:06:07.247 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:06:12.255 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 10878)
2025-08-03 11:06:12.256 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 10878)
2025-08-03 11:06:12.257 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 10878)
2025-08-03 11:06:15.613 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:06:15.613 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接验证失败: web3-rpc，0.97 秒后重试...
2025-08-03 11:06:16.587 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:06:16.589 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 10878)
2025-08-03 11:06:16.589 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 10878)
2025-08-03 11:06:20.429 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:06:20.429 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接验证失败: web3-rpc，1.93 秒后重试...
2025-08-03 11:06:22.357 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 11:06:22.359 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 10878)
2025-08-03 11:06:22.359 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 10878)
2025-08-03 11:06:26.382 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:06:26.382 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接验证失败: web3-rpc，3.89 秒后重试...
2025-08-03 11:06:30.273 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:06:30.273 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 10878)
2025-08-03 11:06:30.326 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 11:06:32.327 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 11516)
2025-08-03 11:06:32.328 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 11516)，跳过启动
2025-08-03 11:06:32.329 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 11516)
2025-08-03 11:06:32.329 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 11516)
2025-08-03 11:06:36.360 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:06:36.360 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接验证失败: web3-rpc，8.01 秒后重试...
2025-08-03 11:06:44.370 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:06:44.370 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 11516)
2025-08-03 11:06:44.371 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=11516)
2025-08-03 11:06:46.372 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 11860)
2025-08-03 11:06:46.372 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 11860)，跳过启动
2025-08-03 11:06:46.374 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 11860)
2025-08-03 11:06:46.374 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 11860)
2025-08-03 11:06:50.308 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:06:50.308 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:06:50.308 | ERROR    | app.utils.mcp_client:execute_tool:1041 - MCP客户端执行工具失败: tool=getAccountInfo, error=连接到MCP服务器 'web3-rpc' 失败: 连接验证失败: web3-rpc
2025-08-03 11:08:10.665 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:08:10.665 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:08:10.691 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:08:10.691 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:08:10.691 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:08:10.691 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:08:10.692 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:08:10.693 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:08:10.694 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:08:10.694 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:08:10.694 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:08:10.699 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:08:10.703 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:08:10.704 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:08:15.711 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 15224)
2025-08-03 11:08:15.712 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 15224)
2025-08-03 11:08:15.713 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 15224)
2025-08-03 11:08:19.147 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:08:19.147 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接验证失败: web3-rpc，1.02 秒后重试...
2025-08-03 11:08:20.173 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:08:20.175 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 15224)
2025-08-03 11:08:20.175 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 15224)
2025-08-03 11:08:24.134 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:08:24.134 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接验证失败: web3-rpc，1.94 秒后重试...
2025-08-03 11:08:26.071 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 11:08:26.073 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 15224)
2025-08-03 11:08:26.073 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 15224)
2025-08-03 11:08:30.083 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:08:30.084 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接验证失败: web3-rpc，3.80 秒后重试...
2025-08-03 11:08:33.888 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:08:33.888 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 15224)
2025-08-03 11:08:33.915 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 11:08:35.917 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 15884)
2025-08-03 11:08:35.917 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 15884)，跳过启动
2025-08-03 11:08:35.918 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 15884)
2025-08-03 11:08:35.918 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 15884)
2025-08-03 11:08:39.857 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:08:39.857 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接验证失败: web3-rpc，8.19 秒后重试...
2025-08-03 11:08:48.043 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:08:48.043 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 15884)
2025-08-03 11:08:48.043 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=15884)
2025-08-03 11:08:50.045 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 16259)
2025-08-03 11:08:50.045 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 16259)，跳过启动
2025-08-03 11:08:50.046 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 16259)
2025-08-03 11:08:50.046 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 16259)
2025-08-03 11:08:53.970 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:08:53.970 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:08:53.970 | ERROR    | app.utils.mcp_client:execute_tool:1041 - MCP客户端执行工具失败: tool=getAccountInfo, error=连接到MCP服务器 'web3-rpc' 失败: 连接验证失败: web3-rpc
2025-08-03 11:09:18.513 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:09:18.513 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:09:18.537 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:09:18.538 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:09:18.539 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:09:18.544 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:09:18.549 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:09:18.549 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:09:23.556 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 17821)
2025-08-03 11:09:23.558 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 17821)
2025-08-03 11:09:23.558 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 17821)
2025-08-03 11:09:27.085 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:09:27.085 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接验证失败: web3-rpc，0.97 秒后重试...
2025-08-03 11:09:28.053 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:09:28.055 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 17821)
2025-08-03 11:09:28.055 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 17821)
2025-08-03 11:09:32.037 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:09:32.037 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接验证失败: web3-rpc，2.04 秒后重试...
2025-08-03 11:09:34.077 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 11:09:34.079 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 17821)
2025-08-03 11:09:34.079 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 17821)
2025-08-03 11:09:38.168 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:09:38.168 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接验证失败: web3-rpc，3.82 秒后重试...
2025-08-03 11:09:41.989 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:09:41.989 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 17821)
2025-08-03 11:09:42.015 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 11:09:44.017 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 18438)
2025-08-03 11:09:44.017 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 18438)，跳过启动
2025-08-03 11:09:44.019 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 18438)
2025-08-03 11:09:44.019 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 18438)
2025-08-03 11:09:48.111 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:09:48.111 | WARNING  | app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接验证失败: web3-rpc，7.72 秒后重试...
2025-08-03 11:09:55.835 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:09:55.836 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 18438)
2025-08-03 11:09:55.836 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=18438)
2025-08-03 11:09:57.838 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 18840)
2025-08-03 11:09:57.838 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 18840)，跳过启动
2025-08-03 11:09:57.839 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 18840)
2025-08-03 11:09:57.839 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 18840)
2025-08-03 11:10:01.801 | WARNING  | app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:10:01.801 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:10:01.801 | ERROR    | app.utils.mcp_client:execute_tool:1041 - MCP客户端执行工具失败: tool=getAccountInfo, error=连接到MCP服务器 'web3-rpc' 失败: 连接验证失败: web3-rpc
2025-08-03 11:11:29.183 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:11:29.183 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:11:29.209 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:11:29.210 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:11:29.211 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:11:29.212 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:11:29.213 | INFO     | backend.app.utils.mcp_client:<module>:230 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-08-03 11:11:29.213 | INFO     | backend.app.utils.mcp_client:<module>:231 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-08-03 11:11:29.257 | INFO     | backend.app.utils.mcp_client:<module>:248 - 成功导入MCP客户端库
2025-08-03 11:11:29.257 | INFO     | backend.app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:11:29.257 | INFO     | backend.app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:11:29.264 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:11:29.269 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:11:29.269 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:11:34.276 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 21644)
2025-08-03 11:11:34.278 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 21644)
2025-08-03 11:11:34.278 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 21644)
2025-08-03 11:11:37.698 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:11:37.698 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接验证失败: web3-rpc，1.00 秒后重试...
2025-08-03 11:11:38.697 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:11:38.699 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 21644)
2025-08-03 11:11:38.699 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 21644)
2025-08-03 11:11:42.640 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:11:42.640 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接验证失败: web3-rpc，1.93 秒后重试...
2025-08-03 11:11:44.572 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 11:11:44.574 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 21644)
2025-08-03 11:11:44.574 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 21644)
2025-08-03 11:11:48.758 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:11:48.758 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接验证失败: web3-rpc，3.96 秒后重试...
2025-08-03 11:11:52.716 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:11:52.716 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 21644)
2025-08-03 11:11:52.742 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 11:11:54.745 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 22300)
2025-08-03 11:11:54.745 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 22300)，跳过启动
2025-08-03 11:11:54.746 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 22300)
2025-08-03 11:11:54.746 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 22300)
2025-08-03 11:11:59.069 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:11:59.070 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接验证失败: web3-rpc，7.60 秒后重试...
2025-08-03 11:12:06.672 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:12:06.672 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 22300)
2025-08-03 11:12:06.672 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=22300)
2025-08-03 11:12:08.674 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 22702)
2025-08-03 11:12:08.674 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 22702)，跳过启动
2025-08-03 11:12:08.675 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 22702)
2025-08-03 11:12:08.676 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 22702)
2025-08-03 11:12:12.749 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:12:12.749 | ERROR    | backend.app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:12:12.749 | ERROR    | backend.app.utils.mcp_client:execute_tool:1047 - MCP客户端执行工具失败: tool=getAccountInfo, error=连接到MCP服务器 'web3-rpc' 失败: 连接验证失败: web3-rpc
2025-08-03 11:12:48.631 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:12:48.632 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:12:48.656 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:12:48.657 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:12:48.658 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:12:48.659 | INFO     | backend.app.utils.mcp_client:<module>:230 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-08-03 11:12:48.659 | INFO     | backend.app.utils.mcp_client:<module>:231 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-08-03 11:12:48.691 | INFO     | backend.app.utils.mcp_client:<module>:248 - 成功导入MCP客户端库
2025-08-03 11:12:48.692 | INFO     | backend.app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:12:48.692 | INFO     | backend.app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:12:48.697 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:12:48.701 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:12:48.701 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:12:53.707 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 24322)
2025-08-03 11:12:53.709 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 24322)
2025-08-03 11:12:53.709 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 24322)
2025-08-03 11:12:57.228 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:12:57.229 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接验证失败: web3-rpc，1.01 秒后重试...
2025-08-03 11:12:58.238 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:12:58.239 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 24322)
2025-08-03 11:12:58.240 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 24322)
2025-08-03 11:13:02.252 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:13:02.252 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接验证失败: web3-rpc，2.06 秒后重试...
2025-08-03 11:13:04.313 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 11:13:04.315 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 24322)
2025-08-03 11:13:04.315 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 24322)
2025-08-03 11:13:08.402 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:13:08.402 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接验证失败: web3-rpc，4.09 秒后重试...
2025-08-03 11:13:12.488 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:13:12.488 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 24322)
2025-08-03 11:13:12.540 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 11:13:14.542 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 24864)
2025-08-03 11:13:14.542 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 24864)，跳过启动
2025-08-03 11:13:14.543 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 24864)
2025-08-03 11:13:14.544 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 24864)
2025-08-03 11:13:18.618 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:13:18.618 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:385 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接验证失败: web3-rpc，7.70 秒后重试...
2025-08-03 11:13:26.321 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 11:13:26.321 | INFO     | app.services.mcp_manager:_shutdown_single_server:1143 - 开始优雅关闭服务器 web3-rpc (PID: 24864)
2025-08-03 11:13:26.321 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1175 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=24864)
2025-08-03 11:13:28.323 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 25208)
2025-08-03 11:13:28.323 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 25208)，跳过启动
2025-08-03 11:13:28.324 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 25208)
2025-08-03 11:13:28.325 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 25208)
2025-08-03 11:13:32.272 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:368 - 新连接验证失败: web3-rpc
2025-08-03 11:13:32.273 | ERROR    | backend.app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:13:32.273 | ERROR    | backend.app.utils.mcp_client:execute_tool:1047 - MCP客户端执行工具失败: tool=getAccountInfo, error=连接到MCP服务器 'web3-rpc' 失败: 连接验证失败: web3-rpc
2025-08-03 11:15:05.114 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:15:05.114 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:15:05.139 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:15:05.139 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:15:05.139 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:15:05.139 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:15:05.139 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:15:05.140 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:15:05.141 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:15:05.141 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:15:05.141 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:15:05.141 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:15:05.141 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:15:05.142 | INFO     | backend.app.utils.mcp_client:<module>:230 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-08-03 11:15:05.142 | INFO     | backend.app.utils.mcp_client:<module>:231 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-08-03 11:15:05.176 | INFO     | backend.app.utils.mcp_client:<module>:248 - 成功导入MCP客户端库
2025-08-03 11:15:05.176 | INFO     | backend.app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:15:05.176 | INFO     | backend.app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:15:05.181 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:15:05.186 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:15:05.186 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:15:10.193 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 28765)
2025-08-03 11:15:10.195 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 28765)
2025-08-03 11:15:10.196 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 28765)
2025-08-03 11:15:13.616 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:15:13.616 | INFO     | backend.app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=getAccountInfo, params={'address': '0x742d35Cc6634C0532925a3b8D4C9db96C4b5Da5e'}
2025-08-03 11:15:13.617 | INFO     | backend.app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=getAccountInfo
2025-08-03 11:15:27.727 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:15:27.727 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:15:27.753 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:15:27.753 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:15:27.754 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:15:27.755 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:15:27.756 | INFO     | backend.app.utils.mcp_client:<module>:230 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-08-03 11:15:27.756 | INFO     | backend.app.utils.mcp_client:<module>:231 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-08-03 11:15:27.789 | INFO     | backend.app.utils.mcp_client:<module>:248 - 成功导入MCP客户端库
2025-08-03 11:15:27.790 | INFO     | backend.app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:15:27.790 | INFO     | backend.app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:15:27.796 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:15:27.800 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:15:27.800 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:15:32.807 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 29593)
2025-08-03 11:15:32.809 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 29593)
2025-08-03 11:15:32.809 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 29593)
2025-08-03 11:15:36.227 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:15:36.227 | INFO     | backend.app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=getAccountInfo, params={'address': '0x742d35Cc6634C0532925a3b8D4C9db96C4b5Da5e'}
2025-08-03 11:15:36.229 | INFO     | backend.app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=getAccountInfo
2025-08-03 11:15:36.229 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: web3-rpc, 原因: 连接已断开
2025-08-03 11:15:36.255 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 29593)
2025-08-03 11:15:36.255 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 29593)
2025-08-03 11:15:40.132 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:15:40.132 | INFO     | backend.app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=searchCoinGecko, params={'query': 'bitcoin'}
2025-08-03 11:15:40.134 | INFO     | backend.app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=searchCoinGecko
2025-08-03 11:15:40.134 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: web3-rpc, 原因: 连接已断开
2025-08-03 11:15:40.165 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 29593)
2025-08-03 11:15:40.166 | INFO     | backend.app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 29593)
2025-08-03 11:15:43.646 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:16:53.124 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:16:53.124 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:16:53.150 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:16:53.151 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:16:53.152 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:17:12.034 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:17:12.034 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:17:12.059 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:17:12.060 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:17:12.061 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:17:12.062 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:17:12.062 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:17:30.418 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:17:30.419 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:17:30.445 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:17:30.446 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:17:30.447 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:17:30.447 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:17:30.447 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:17:30.447 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:17:30.447 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:17:30.447 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:17:30.448 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:17:49.892 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:17:49.892 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:17:49.918 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:17:49.919 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:17:49.920 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:17:49.920 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:17:49.920 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:17:49.920 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:17:49.920 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:17:49.920 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:17:49.925 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:17:49.929 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:17:49.929 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:17:54.935 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 34578)
2025-08-03 11:17:54.936 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 34578)
2025-08-03 11:17:54.937 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 34578)
2025-08-03 11:17:58.245 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:17:58.245 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=getAccountInfo, params={'address': '0x742d35Cc6634C0532925a3b8D4C9db96C4b4Db93'}
2025-08-03 11:17:58.247 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=getAccountInfo
2025-08-03 11:17:58.269 | WARNING  | app.utils.mcp_client:close_all_connections:1245 - 关闭MCP服务器连接时出错 web3-rpc: Attempted to exit cancel scope in a different task than it was entered in
2025-08-03 11:18:45.838 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:18:45.838 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:18:45.864 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:18:45.864 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:18:45.864 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:18:45.864 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:18:45.864 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:18:45.864 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:18:45.864 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:18:45.864 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:18:45.864 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:18:45.865 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:18:45.866 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:18:45.866 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:18:45.866 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:18:45.866 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:18:45.866 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:18:45.866 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:18:45.871 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:18:45.875 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:18:45.876 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:18:50.883 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 36523)
2025-08-03 11:18:50.885 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 36523)
2025-08-03 11:18:50.885 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 36523)
2025-08-03 11:18:54.451 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:18:54.451 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=getAccountInfo, params={'address': '0x742d35Cc6634C0532925a3b8D4C9db96C4b4Db93'}
2025-08-03 11:18:54.453 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=getAccountInfo
2025-08-03 11:18:54.479 | INFO     | app.utils.mcp_client:close_all_connections:1243 - 已关闭MCP服务器连接: web3-rpc
2025-08-03 11:19:38.314 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:19:38.315 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:19:38.340 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:19:38.340 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:19:38.341 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:19:38.342 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:19:38.343 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:19:38.343 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:19:38.348 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:19:38.352 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:19:38.352 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:19:43.357 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 38095)
2025-08-03 11:19:43.359 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 38095)
2025-08-03 11:19:43.360 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 38095)
2025-08-03 11:19:46.836 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:19:46.836 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=getAccountInfo, params={'address': '0x742d35Cc6634C0532925a3b8D4C9db96C4b4Db93'}
2025-08-03 11:19:46.838 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=getAccountInfo
2025-08-03 11:19:46.838 | WARNING  | app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: web3-rpc, 原因: 连接已断开
2025-08-03 11:19:46.863 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 38095)
2025-08-03 11:19:46.864 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 38095)
2025-08-03 11:19:50.389 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:19:50.389 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=searchCoinGecko, params={'query': 'bitcoin'}
2025-08-03 11:19:50.391 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=searchCoinGecko
2025-08-03 11:19:50.392 | WARNING  | app.utils.mcp_client:check_connection_pool_health:1169 - 清理不健康的连接: web3-rpc
2025-08-03 11:19:50.418 | INFO     | app.utils.mcp_client:check_connection_pool_health:1172 - 连接池健康检查完成: 0/1 连接健康
2025-08-03 11:24:09.545 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:24:09.545 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:24:09.572 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:24:09.573 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:24:09.573 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:24:09.573 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:24:09.573 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:24:09.573 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:24:09.573 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:24:09.573 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:24:09.573 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:24:09.573 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:24:09.574 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:24:09.575 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:24:09.575 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:24:09.575 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:24:09.575 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:24:09.575 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:24:09.575 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:24:09.575 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:24:09.575 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:24:36.373 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:24:36.373 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:24:36.398 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:24:36.398 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:24:36.398 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:24:36.399 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:24:36.400 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:24:36.401 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:24:36.401 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:24:36.405 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:24:36.410 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:24:36.410 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:24:41.417 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 48166)
2025-08-03 11:24:41.421 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 48166)
2025-08-03 11:24:41.422 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 48166)
2025-08-03 11:24:44.856 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:24:44.856 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=searchCoinGecko, params={'query': 'wuhan yichang distance'}
2025-08-03 11:24:44.860 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=searchCoinGecko
2025-08-03 11:24:44.860 | WARNING  | app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: web3-rpc, 原因: 连接已断开
2025-08-03 11:24:44.886 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 48166)
2025-08-03 11:24:44.886 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 48166)
2025-08-03 11:24:48.424 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:24:48.424 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=getAccountInfo, params={'address': '0x742d35Cc6634C0532925a3b8D4C9db96C4b4Db93'}
2025-08-03 11:24:48.426 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=getAccountInfo
2025-08-03 11:24:48.426 | WARNING  | app.utils.mcp_client:check_connection_pool_health:1169 - 清理不健康的连接: web3-rpc
2025-08-03 11:24:48.467 | INFO     | app.utils.mcp_client:check_connection_pool_health:1172 - 连接池健康检查完成: 0/1 连接健康
2025-08-03 11:26:04.352 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:26:04.353 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:26:04.378 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:26:04.378 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:26:04.378 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:26:04.378 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:26:04.378 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:26:04.378 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:26:04.378 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:26:04.378 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:26:04.379 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:26:04.380 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:26:04.381 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:26:04.381 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:26:04.386 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:26:04.390 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:26:04.391 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:26:09.398 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 51308)
2025-08-03 11:26:09.924 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: amap-maps (尝试 1/5)
2025-08-03 11:26:09.924 | WARNING  | app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: amap-maps, 原因: 连接已断开
2025-08-03 11:26:09.937 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:26:09.938 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 59.5 秒），跳过重启
2025-08-03 11:26:09.938 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 1 次重试，延迟 0.95 秒...
2025-08-03 11:26:10.890 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:26:10.895 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:26:10.895 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 58.5 秒），跳过重启
2025-08-03 11:26:10.895 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 2 次重试，延迟 1.97 秒...
2025-08-03 11:26:12.869 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 11:26:12.873 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:26:12.873 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 56.5 秒），跳过重启
2025-08-03 11:26:12.873 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 3 次重试，延迟 3.86 秒...
2025-08-03 11:26:16.733 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:26:16.733 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:26:18.738 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:26:18.738 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:26:23.740 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 52001)
2025-08-03 11:26:23.746 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:26:23.746 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:26:23.746 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 4 次重试，延迟 7.78 秒...
2025-08-03 11:26:31.531 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:26:31.531 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:26:33.539 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:26:33.539 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:26:38.542 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 52802)
2025-08-03 11:26:38.549 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:26:38.549 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:26:38.550 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'amap-maps' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:26:38.550 | ERROR    | app.utils.mcp_client:execute_tool:1048 - MCP客户端执行工具失败: tool=maps_direction_walking, error=连接到MCP服务器 'amap-maps' 失败: 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps
2025-08-03 11:26:56.911 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:26:56.911 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:26:56.937 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:26:56.937 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:26:56.937 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:26:56.937 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:26:56.938 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:26:56.939 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:26:56.939 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:26:56.939 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:26:56.939 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:26:56.939 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:26:56.939 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:26:56.939 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:26:56.939 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:26:56.939 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:27:37.681 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:27:37.681 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:27:37.707 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:27:37.707 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:27:37.707 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:27:37.707 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:27:37.708 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:27:37.709 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:27:37.709 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:27:37.709 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:27:37.709 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:27:37.709 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:27:37.709 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:27:37.709 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:27:37.709 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:27:37.709 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:27:37.712 | INFO     | backend.app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 11:28:06.830 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:28:06.830 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:28:06.857 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:28:06.858 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:28:06.859 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:28:06.860 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:28:06.860 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:28:06.860 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:28:06.860 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:28:06.860 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:28:06.860 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:28:06.863 | INFO     | backend.app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 11:28:06.864 | INFO     | backend.app.utils.mcp_client:<module>:230 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-08-03 11:28:06.864 | INFO     | backend.app.utils.mcp_client:<module>:231 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-08-03 11:28:06.906 | INFO     | backend.app.utils.mcp_client:<module>:248 - 成功导入MCP客户端库
2025-08-03 11:28:06.907 | INFO     | backend.app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:28:06.907 | INFO     | backend.app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:28:06.907 | INFO     | backend.app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 11:28:06.908 | INFO     | backend.app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:28:06.908 | INFO     | backend.app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:28:06.912 | INFO     | backend.app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:28:06.917 | INFO     | backend.app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:28:06.917 | INFO     | backend.app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:28:11.922 | INFO     | backend.app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 56248)
2025-08-03 11:28:45.427 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:28:45.427 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:28:45.452 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:28:45.452 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:28:45.452 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:28:45.452 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:28:45.453 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:28:45.454 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:28:45.454 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:28:45.454 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:28:45.454 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:28:45.454 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:28:45.454 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:28:45.454 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:28:45.454 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:28:45.454 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:28:45.457 | INFO     | backend.app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 11:28:45.458 | INFO     | backend.app.utils.mcp_client:<module>:230 - 已设置LLM和MCP环境变量，用于启动MCP客户端进程
2025-08-03 11:28:45.458 | INFO     | backend.app.utils.mcp_client:<module>:231 - MCP服务器配置文件路径: /home/devbox/project/MCP_Client/config/mcp_servers.json
2025-08-03 11:28:45.491 | INFO     | backend.app.utils.mcp_client:<module>:248 - 成功导入MCP客户端库
2025-08-03 11:28:45.491 | INFO     | backend.app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:28:45.491 | INFO     | backend.app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:28:45.492 | INFO     | backend.app.services.mcp_manager:_load_server_configs:123 - 已加载 4 个MCP服务器配置
2025-08-03 11:28:45.492 | INFO     | backend.app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:28:45.492 | INFO     | backend.app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:28:45.497 | INFO     | backend.app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:28:45.501 | INFO     | backend.app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:28:45.501 | INFO     | backend.app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:28:50.508 | INFO     | backend.app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 57738)
2025-08-03 11:28:50.518 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:28:50.523 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:28:50.523 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:28:55.530 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 57965)
2025-08-03 11:28:56.101 | INFO     | backend.app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: amap-maps (尝试 1/5)
2025-08-03 11:28:56.101 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: amap-maps, 原因: 连接已断开
2025-08-03 11:28:56.119 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:28:56.119 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 59.4 秒），跳过重启
2025-08-03 11:28:56.119 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 1 次重试，延迟 1.00 秒...
2025-08-03 11:28:57.117 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:28:57.122 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:28:57.122 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 58.4 秒），跳过重启
2025-08-03 11:28:57.122 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 2 次重试，延迟 1.98 秒...
2025-08-03 11:28:59.102 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 11:28:59.108 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:28:59.108 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 56.4 秒），跳过重启
2025-08-03 11:28:59.108 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 3 次重试，延迟 4.15 秒...
2025-08-03 11:29:03.261 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:29:03.261 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:29:05.268 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:29:05.268 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:29:10.270 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 58787)
2025-08-03 11:29:10.276 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:29:10.276 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:29:10.276 | WARNING  | backend.app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 4 次重试，延迟 7.83 秒...
2025-08-03 11:29:18.102 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:29:18.102 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:29:20.107 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:29:20.108 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:29:25.110 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 59687)
2025-08-03 11:29:25.116 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:29:25.116 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:29:25.116 | ERROR    | backend.app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'amap-maps' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:29:25.116 | ERROR    | backend.app.utils.mcp_client:execute_tool:1048 - MCP客户端执行工具失败: tool=maps_direction_walking, error=连接到MCP服务器 'amap-maps' 失败: 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps
2025-08-03 11:30:26.190 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:30:26.191 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:30:26.219 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:30:26.219 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:30:26.219 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:30:26.219 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:30:26.219 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:30:26.219 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:30:26.219 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:30:26.219 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:30:26.220 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:30:26.220 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:30:26.220 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:30:26.220 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:30:26.220 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:30:26.220 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:30:26.220 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:30:26.220 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:30:26.220 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:30:26.221 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:30:26.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:30:26.222 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:30:26.222 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:30:26.222 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:30:26.228 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:30:26.232 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:30:26.232 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:30:31.238 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 62065)
2025-08-03 11:30:31.243 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 62065)
2025-08-03 11:30:31.243 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 62065)
2025-08-03 11:30:34.774 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:30:34.774 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=getAccountInfo, params={'address': '0x742d35Cc6634C0532925a3b8D4C9db96C4b4Db93'}
2025-08-03 11:30:34.776 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=getAccountInfo
2025-08-03 11:30:34.776 | WARNING  | app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: web3-rpc, 原因: 连接已断开
2025-08-03 11:30:34.814 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 62065)
2025-08-03 11:30:34.814 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 62065)
2025-08-03 11:30:38.346 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:30:38.346 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=searchCoinGecko, params={'query': 'bitcoin price'}
2025-08-03 11:30:38.348 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=searchCoinGecko
2025-08-03 11:30:38.348 | WARNING  | app.utils.mcp_client:check_connection_pool_health:1169 - 清理不健康的连接: web3-rpc
2025-08-03 11:30:38.377 | INFO     | app.utils.mcp_client:check_connection_pool_health:1172 - 连接池健康检查完成: 0/1 连接健康
2025-08-03 11:31:05.890 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:31:05.890 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:31:05.915 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:31:05.915 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:31:05.915 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:31:05.915 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:31:05.915 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:31:05.915 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:31:05.915 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:31:05.915 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:31:05.915 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:31:05.916 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:31:05.917 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:31:05.917 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:31:05.917 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:31:05.917 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:31:05.917 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:31:05.922 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 11:31:05.926 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 11:31:05.927 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 11:31:10.934 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 63535)
2025-08-03 11:31:10.938 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 63535)
2025-08-03 11:31:10.938 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 63535)
2025-08-03 11:31:14.423 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:31:14.423 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=getAccountInfo, params={'address': '0x742d35Cc6634C0532925a3b8D4C9db96C4b4Db93'}
2025-08-03 11:31:14.425 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=getAccountInfo
2025-08-03 11:31:14.425 | WARNING  | app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: web3-rpc, 原因: 连接已断开
2025-08-03 11:31:14.458 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 63535)
2025-08-03 11:31:14.458 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:471 - 通过管理器确保服务器运行: web3-rpc (PID: 63535)
2025-08-03 11:31:18.027 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: web3-rpc (尝试 1/5)
2025-08-03 11:31:18.028 | INFO     | app.utils.mcp_client:execute_tool:995 - 准备通过MCP客户端 ('web3-rpc') 执行工具: tool=searchCoinGecko, params={'query': 'bitcoin price'}
2025-08-03 11:31:18.029 | INFO     | app.utils.mcp_client:execute_tool:1028 - MCP客户端执行工具成功: tool=searchCoinGecko
2025-08-03 11:31:18.029 | WARNING  | app.utils.mcp_client:check_connection_pool_health:1169 - 清理不健康的连接: web3-rpc
2025-08-03 11:31:18.062 | INFO     | app.utils.mcp_client:check_connection_pool_health:1172 - 连接池健康检查完成: 0/1 连接健康
2025-08-03 11:34:30.477 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:34:30.477 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:34:30.503 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:34:30.504 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:34:30.505 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:34:30.505 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:34:53.174 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:34:53.174 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:34:53.201 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:34:53.201 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 11:34:53.201 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 11:34:53.201 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:34:53.201 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:34:53.201 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:34:53.202 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:34:53.203 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:34:53.203 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:34:53.203 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:34:53.203 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:34:53.203 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:34:53.203 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:34:53.203 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:34:53.203 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:35:20.674 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:35:20.674 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:35:20.700 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:35:20.700 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:35:20.700 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:35:20.700 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:35:20.700 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:35:20.700 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:35:20.700 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:35:20.700 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:35:20.701 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:35:20.702 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:35:20.702 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:35:20.702 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:35:20.702 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:35:20.702 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:35:20.702 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:35:20.707 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:35:20.708 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:35:25.713 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 6722)
2025-08-03 11:35:28.717 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:35:28.717 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:35:28.722 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:35:28.722 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 57.0 秒），跳过重启
2025-08-03 11:35:28.722 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 1 次重试，延迟 1.01 秒...
2025-08-03 11:35:29.731 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:35:29.737 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:35:29.737 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 56.0 秒），跳过重启
2025-08-03 11:35:29.737 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 2 次重试，延迟 2.06 秒...
2025-08-03 11:35:31.800 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 11:35:31.804 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:35:31.804 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 53.9 秒），跳过重启
2025-08-03 11:35:31.804 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 3 次重试，延迟 3.87 秒...
2025-08-03 11:35:35.679 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:35:35.679 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:35:37.684 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:35:37.685 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:35:42.691 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 7392)
2025-08-03 11:35:42.696 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:35:42.696 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:35:42.696 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 4 次重试，延迟 8.18 秒...
2025-08-03 11:35:50.890 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:35:50.891 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:35:52.897 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:35:52.898 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:35:57.904 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 7992)
2025-08-03 11:35:57.910 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:35:57.910 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:35:57.910 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'amap-maps' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:35:57.910 | ERROR    | app.utils.mcp_client:get_server_tools:945 - 获取服务器 amap-maps 工具信息时发生错误: 连接到MCP服务器 'amap-maps' 失败: 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps
2025-08-03 11:36:40.597 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:36:40.597 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:36:40.622 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:36:40.623 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:36:40.624 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:36:40.624 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:36:40.624 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:36:40.624 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:36:45.629 | INFO     | app.utils.mcp_client:check_connection_pool_health:1172 - 连接池健康检查完成: 0/0 连接健康
2025-08-03 11:36:45.634 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:36:45.639 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:36:45.640 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:36:50.647 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 9640)
2025-08-03 11:36:51.141 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: amap-maps (尝试 1/5)
2025-08-03 11:36:51.142 | WARNING  | app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: amap-maps, 原因: 连接已断开
2025-08-03 11:36:51.155 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:36:51.156 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 59.5 秒），跳过重启
2025-08-03 11:36:51.156 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 1 次重试，延迟 1.02 秒...
2025-08-03 11:36:52.173 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:36:52.178 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:36:52.178 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 58.5 秒），跳过重启
2025-08-03 11:36:52.178 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 2 次重试，延迟 2.00 秒...
2025-08-03 11:36:54.177 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 11:36:54.181 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:36:54.182 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 56.5 秒），跳过重启
2025-08-03 11:36:54.182 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 3 次重试，延迟 3.81 秒...
2025-08-03 11:36:57.991 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:36:57.992 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:36:59.996 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:36:59.997 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:37:04.999 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 10226)
2025-08-03 11:37:05.004 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:37:05.004 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:37:05.004 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 4 次重试，延迟 8.34 秒...
2025-08-03 11:37:13.342 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:37:13.342 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:37:15.348 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:37:15.348 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:37:20.350 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 10847)
2025-08-03 11:37:20.357 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:37:20.357 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:37:20.357 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'amap-maps' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:37:20.357 | ERROR    | app.utils.mcp_client:execute_tool:1048 - MCP客户端执行工具失败: tool=maps_direction_walking, error=连接到MCP服务器 'amap-maps' 失败: 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps
2025-08-03 11:38:35.839 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 11:38:35.840 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 11:38:35.866 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 11:38:35.866 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 11:38:35.867 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 11:38:35.868 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 11:38:35.869 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 11:38:35.869 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 11:38:35.869 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 11:38:40.870 | INFO     | app.utils.mcp_client:check_connection_pool_health:1172 - 连接池健康检查完成: 0/0 连接健康
2025-08-03 11:38:40.875 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:38:40.881 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:38:40.882 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:38:45.890 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 13705)
2025-08-03 11:38:46.381 | INFO     | app.utils.mcp_client:_get_or_create_client:365 - 成功连接到MCP服务器并加入连接池: amap-maps (尝试 1/5)
2025-08-03 11:38:46.381 | WARNING  | app.utils.mcp_client:_get_or_create_client:333 - 连接健康检查失败: amap-maps, 原因: 连接已断开
2025-08-03 11:38:46.396 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:38:46.396 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 59.5 秒），跳过重启
2025-08-03 11:38:46.397 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 1 次重试，延迟 0.99 秒...
2025-08-03 11:38:47.383 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1088 - 开始清理僵尸进程
2025-08-03 11:38:47.388 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:38:47.388 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 58.5 秒），跳过重启
2025-08-03 11:38:47.388 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 2 次重试，延迟 1.98 秒...
2025-08-03 11:38:49.366 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 amap-maps 的失败状态
2025-08-03 11:38:49.371 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:38:49.372 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 56.5 秒），跳过重启
2025-08-03 11:38:49.372 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 3 次重试，延迟 3.82 秒...
2025-08-03 11:38:53.189 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:38:53.189 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:38:55.194 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:38:55.194 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:39:00.196 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 14302)
2025-08-03 11:39:00.201 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:39:00.201 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:39:00.201 | WARNING  | app.utils.mcp_client:_get_or_create_client:353 - 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps，第 4 次重试，延迟 8.10 秒...
2025-08-03 11:39:08.297 | INFO     | app.services.mcp_manager:restart_server:1229 - 重启服务器 amap-maps (优雅模式: True)
2025-08-03 11:39:08.297 | INFO     | app.services.mcp_manager:_shutdown_single_server:1134 - 服务器 amap-maps 未运行，无需关闭
2025-08-03 11:39:10.302 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 11:39:10.303 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 11:39:15.305 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 14868)
2025-08-03 11:39:15.310 | INFO     | app.services.mcp_manager:ensure_server_running:1023 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 11:39:15.311 | INFO     | app.services.mcp_manager:start_server:347 - 服务器 amap-maps 在冷却期内（剩余 60.0 秒），跳过重启
2025-08-03 11:39:15.311 | ERROR    | app.utils.mcp_client:_get_or_create_client:380 - 连接到MCP服务器 'amap-maps' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 11:39:15.311 | ERROR    | app.utils.mcp_client:execute_tool:1048 - MCP客户端执行工具失败: tool=maps_direction_walking, error=连接到MCP服务器 'amap-maps' 失败: 无法启动MCP服务器 amap-maps: 服务器启动失败: amap-maps
2025-08-03 12:55:57.885 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 12:55:57.885 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 12:55:57.910 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 12:55:57.911 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 12:55:57.911 | INFO     | __main__:test_mcp_connection_fix:38 - 测试服务器: filesystem
2025-08-03 12:55:57.912 | INFO     | __main__:test_mcp_connection_fix:41 - 
=== 测试1: 检查服务器配置 ===
2025-08-03 12:55:57.912 | WARNING  | __main__:test_mcp_connection_fix:45 - ⚠ 服务器配置不存在: filesystem
2025-08-03 12:55:57.912 | INFO     | __main__:test_mcp_connection_fix:50 - 使用可用服务器: playwright
2025-08-03 12:55:57.912 | INFO     | __main__:test_mcp_connection_fix:56 - 
=== 测试2: 仅连接模式测试 ===
2025-08-03 12:55:57.915 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 12:55:57.915 | INFO     | __main__:test_mcp_connection_fix:58 - 仅连接模式结果: {'success': True, 'running': True, 'pid': 43752, 'message': '服务器已在运行: playwright', 'error': None}
2025-08-03 12:55:57.915 | SUCCESS  | __main__:test_mcp_connection_fix:61 - ✓ 成功连接到现有服务器
2025-08-03 12:55:57.915 | INFO     | __main__:test_mcp_connection_fix:70 - 
=== 测试3: 启动模式测试 ===
2025-08-03 12:55:57.919 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 12:55:57.919 | INFO     | __main__:test_mcp_connection_fix:72 - 启动模式结果: {'success': True, 'running': True, 'pid': 43752, 'message': '服务器已在运行: playwright', 'error': None}
2025-08-03 12:55:57.919 | SUCCESS  | __main__:test_mcp_connection_fix:75 - ✓ 服务器启动/连接成功 (PID: 43752)
2025-08-03 12:55:57.919 | INFO     | __main__:test_mcp_connection_fix:81 - 
=== 测试4: 智能连接逻辑测试 ===
2025-08-03 12:55:57.919 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: playwright (PID: 43752)
2025-08-03 12:55:59.784 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 12:55:59.784 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 12:55:59.810 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 12:55:59.810 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 12:55:59.810 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 12:55:59.810 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 12:55:59.810 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 12:55:59.810 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 12:55:59.810 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 12:55:59.810 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 12:55:59.811 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 12:55:59.812 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 12:55:59.812 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 12:55:59.812 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 12:55:59.812 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 12:55:59.812 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 12:55:59.812 | INFO     | __main__:test_mcp_connection_fix:38 - 测试服务器: filesystem
2025-08-03 12:55:59.812 | INFO     | __main__:test_mcp_connection_fix:41 - 
=== 测试1: 检查服务器配置 ===
2025-08-03 12:55:59.812 | WARNING  | __main__:test_mcp_connection_fix:45 - ⚠ 服务器配置不存在: filesystem
2025-08-03 12:55:59.812 | INFO     | __main__:test_mcp_connection_fix:50 - 使用可用服务器: playwright
2025-08-03 12:55:59.812 | INFO     | __main__:test_mcp_connection_fix:56 - 
=== 测试2: 仅连接模式测试 ===
2025-08-03 12:55:59.817 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 12:55:59.817 | INFO     | __main__:test_mcp_connection_fix:58 - 仅连接模式结果: {'success': True, 'running': True, 'pid': 43752, 'message': '服务器已在运行: playwright', 'error': None}
2025-08-03 12:55:59.817 | SUCCESS  | __main__:test_mcp_connection_fix:61 - ✓ 成功连接到现有服务器
2025-08-03 12:55:59.817 | INFO     | __main__:test_mcp_connection_fix:70 - 
=== 测试3: 启动模式测试 ===
2025-08-03 12:55:59.820 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 12:55:59.821 | INFO     | __main__:test_mcp_connection_fix:72 - 启动模式结果: {'success': True, 'running': True, 'pid': 43752, 'message': '服务器已在运行: playwright', 'error': None}
2025-08-03 12:55:59.821 | SUCCESS  | __main__:test_mcp_connection_fix:75 - ✓ 服务器启动/连接成功 (PID: 43752)
2025-08-03 12:55:59.821 | INFO     | __main__:test_mcp_connection_fix:81 - 
=== 测试4: 智能连接逻辑测试 ===
2025-08-03 12:55:59.821 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: playwright (PID: 43752)
2025-08-03 12:56:01.670 | INFO     | app.utils.mcp_client:_try_connect_existing_server:681 - 成功连接到运行中的服务器: playwright
2025-08-03 12:56:01.670 | INFO     | __main__:test_mcp_connection_fix:85 - 连接现有服务器结果: {'success': True, 'message': '连接到运行中的服务器: playwright', 'error': None, 'pid': 43752, 'client': <mcp_client.MCPClient object at 0x77f1ecd4abd0>}
2025-08-03 12:56:01.670 | SUCCESS  | __main__:test_mcp_connection_fix:88 - ✓ 成功连接到现有服务器
2025-08-03 12:56:01.670 | INFO     | __main__:test_mcp_connection_fix:92 - 测试客户端功能...
2025-08-03 12:56:01.670 | INFO     | __main__:test_mcp_connection_fix:103 - 
=== 测试5: 错误分类测试 ===
2025-08-03 12:56:01.671 | INFO     | __main__:test_mcp_connection_fix:117 - 连接被拒绝: CONNECTION_REFUSED -> MCP服务器拒绝连接，请检查服务器配置: Connection refused
2025-08-03 12:56:01.671 | INFO     | __main__:test_mcp_connection_fix:117 - 服务器未运行: SERVER_UNAVAILABLE -> MCP服务器当前不可用: Server not running
2025-08-03 12:56:01.671 | INFO     | __main__:test_mcp_connection_fix:117 - 连接超时: CONNECTION_TIMEOUT -> 连接MCP服务器超时，请稍后重试: Timeout occurred
2025-08-03 12:56:01.671 | INFO     | __main__:test_mcp_connection_fix:117 - 权限被拒绝: PROCESS_PERMISSION_DENIED -> 权限不足，无法启动进程: Permission denied
2025-08-03 12:56:01.671 | INFO     | __main__:test_mcp_connection_fix:120 - 
=== 测试6: 连接池健康检查 ===
2025-08-03 12:56:01.671 | INFO     | app.utils.mcp_client:check_connection_pool_health:1387 - 连接池健康检查完成: 0/0 连接健康
2025-08-03 12:56:01.671 | INFO     | __main__:test_mcp_connection_fix:123 - 连接池健康状态: {'total_connections': 0, 'healthy_connections': 0, 'unhealthy_connections': 0, 'connection_details': {}, 'timestamp': 1754225761.6716702}
2025-08-03 12:56:01.671 | WARNING  | __main__:test_mcp_connection_fix:128 - ⚠ 连接池存在问题
2025-08-03 12:56:01.671 | INFO     | __main__:test_mcp_connection_fix:133 - 
=== 测试完成 ===
2025-08-03 12:56:01.672 | SUCCESS  | __main__:test_mcp_connection_fix:134 - MCP连接逻辑修复测试完成
2025-08-03 12:56:01.676 | INFO     | __main__:test_cooldown_mechanism:145 - 
=== 冷却期机制测试 ===
2025-08-03 12:56:01.676 | INFO     | __main__:test_cooldown_mechanism:157 - 使用服务器进行冷却期测试: playwright
2025-08-03 12:56:01.680 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 12:56:01.680 | INFO     | __main__:test_cooldown_mechanism:164 - 仅连接模式耗时: 0.004秒
2025-08-03 12:56:01.680 | INFO     | __main__:test_cooldown_mechanism:165 - 仅连接模式结果: 服务器已在运行: playwright
2025-08-03 12:56:01.684 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 12:56:01.684 | INFO     | __main__:test_cooldown_mechanism:172 - 启动模式耗时: 0.004秒
2025-08-03 12:56:01.684 | INFO     | __main__:test_cooldown_mechanism:173 - 启动模式结果: 服务器已在运行: playwright
2025-08-03 12:56:01.684 | SUCCESS  | __main__:test_cooldown_mechanism:177 - ✓ 仅连接模式快速响应（绕过冷却期）
2025-08-03 12:56:01.684 | INFO     | __main__:main:194 - 所有测试完成
2025-08-03 13:08:21.416 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 13:08:21.416 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 13:08:21.442 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 13:08:21.442 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 13:08:21.442 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 13:08:21.442 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 13:08:21.443 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 13:08:21.444 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 13:08:21.445 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 13:08:21.445 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 13:08:21.445 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 13:08:21.445 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 13:08:46.873 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 13:08:46.873 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 13:08:46.898 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 13:08:46.898 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 13:08:46.898 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 13:08:46.898 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 13:08:46.898 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 13:08:46.898 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 13:08:46.899 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 13:08:46.900 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 13:08:46.900 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 13:08:46.900 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 13:08:46.900 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 13:08:46.900 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 13:08:46.900 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 13:08:46.900 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 13:08:46.900 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 13:09:10.581 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 13:09:10.581 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 13:09:10.607 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 13:09:10.608 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 13:09:10.609 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 13:09:10.609 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 13:09:10.614 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 13:09:10.614 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:495 - 通过管理器确保服务器运行: playwright (PID: 43752)
2025-08-03 13:09:12.387 | INFO     | app.utils.mcp_client:_get_or_create_client:388 - 成功连接到MCP服务器并加入连接池: playwright (尝试 1/5)
2025-08-03 13:09:12.392 | INFO     | app.services.mcp_manager:ensure_server_running:1034 - 客户端请求启动MCP服务器: minimax-mcp-js
2025-08-03 13:09:12.397 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: minimax-mcp-js
2025-08-03 13:09:12.397 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 minimax-mcp-js 环境变量验证通过，已设置 4 个变量
2025-08-03 13:09:28.914 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 minimax-mcp-js 启动成功 (PID: 22943)
2025-08-03 13:09:29.986 | INFO     | app.utils.mcp_client:_get_or_create_client:388 - 成功连接到MCP服务器并加入连接池: minimax-mcp-js (尝试 1/5)
2025-08-03 13:09:29.992 | INFO     | app.services.mcp_manager:ensure_server_running:1034 - 客户端请求启动MCP服务器: amap-maps
2025-08-03 13:09:29.997 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: amap-maps
2025-08-03 13:09:29.998 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-03 13:09:35.004 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 amap-maps 启动成功 (PID: 23554)
2025-08-03 13:09:35.836 | INFO     | app.utils.mcp_client:_get_or_create_client:388 - 成功连接到MCP服务器并加入连接池: amap-maps (尝试 1/5)
2025-08-03 13:09:35.847 | INFO     | app.services.mcp_manager:ensure_server_running:1034 - 客户端请求启动MCP服务器: web3-rpc
2025-08-03 13:09:35.858 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 13:09:35.858 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 13:09:53.040 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 23847)
2025-08-03 13:09:53.045 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 23847)
2025-08-03 13:09:53.045 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:495 - 通过管理器确保服务器运行: web3-rpc (PID: 23847)
2025-08-03 13:10:23.156 | WARNING  | app.utils.mcp_client:_create_client_connection:538 - 创建客户端连接失败 web3-rpc (尝试 1): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:10:23.389 | WARNING  | app.utils.mcp_client:_get_or_create_client:408 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 1/5): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)，1.04 秒后重试...
2025-08-03 13:10:24.597 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1099 - 开始清理僵尸进程
2025-08-03 13:10:24.606 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: web3-rpc (PID: 23847)
2025-08-03 13:10:55.243 | WARNING  | app.utils.mcp_client:_create_client_connection:538 - 创建客户端连接失败 web3-rpc (尝试 1): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:10:55.278 | WARNING  | app.utils.mcp_client:_try_connect_existing_server:700 - 连接到运行中服务器失败 web3-rpc: 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:10:56.690 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 23847)
2025-08-03 13:10:58.070 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:495 - 通过管理器确保服务器运行: web3-rpc (PID: 23847)
2025-08-03 13:11:30.816 | WARNING  | app.utils.mcp_client:_create_client_connection:538 - 创建客户端连接失败 web3-rpc (尝试 2): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:11:30.825 | WARNING  | app.utils.mcp_client:_get_or_create_client:408 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 2/5): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)，1.95 秒后重试...
2025-08-03 13:11:32.786 | INFO     | app.services.mcp_manager:reset_server_failures:954 - 已重置服务器 web3-rpc 的失败状态
2025-08-03 13:11:32.945 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 23847)
2025-08-03 13:11:32.946 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:495 - 通过管理器确保服务器运行: web3-rpc (PID: 23847)
2025-08-03 13:12:05.503 | WARNING  | app.utils.mcp_client:_create_client_connection:538 - 创建客户端连接失败 web3-rpc (尝试 3): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:12:08.549 | WARNING  | app.utils.mcp_client:_get_or_create_client:408 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 3/5): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)，4.12 秒后重试...
2025-08-03 13:12:12.847 | INFO     | app.utils.mcp_client:_intelligent_server_recovery:809 - 强制重启服务器: web3-rpc (尝试 4)
2025-08-03 13:12:12.872 | INFO     | app.services.mcp_manager:restart_server:1240 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 13:12:12.872 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 开始优雅关闭服务器 web3-rpc (PID: 23847)
2025-08-03 13:12:12.903 | INFO     | app.services.mcp_manager:_shutdown_single_server:1165 - 服务器 web3-rpc 优雅关闭成功
2025-08-03 13:12:14.908 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 24461)
2025-08-03 13:12:14.908 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 24461)，跳过启动
2025-08-03 13:12:45.435 | WARNING  | app.utils.mcp_client:_create_client_connection:538 - 创建客户端连接失败 web3-rpc (尝试 4): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:12:46.333 | WARNING  | app.utils.mcp_client:_get_or_create_client:408 - 连接到MCP服务器 'web3-rpc' 失败 (尝试 4/5): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)，8.32 秒后重试...
2025-08-03 13:12:54.682 | INFO     | app.utils.mcp_client:_intelligent_server_recovery:809 - 强制重启服务器: web3-rpc (尝试 5)
2025-08-03 13:12:54.686 | INFO     | app.services.mcp_manager:restart_server:1240 - 重启服务器 web3-rpc (优雅模式: True)
2025-08-03 13:12:54.686 | INFO     | app.services.mcp_manager:_shutdown_single_server:1154 - 开始优雅关闭服务器 web3-rpc (PID: 24461)
2025-08-03 13:12:54.687 | WARNING  | app.services.mcp_manager:_shutdown_single_server:1186 - 关闭服务器 web3-rpc 时进程访问异常: process PID not found (pid=24461)
2025-08-03 13:12:56.693 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 24675)
2025-08-03 13:12:56.694 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 web3-rpc 已在运行 (PID: 24675)，跳过启动
2025-08-03 13:13:28.796 | WARNING  | app.utils.mcp_client:_create_client_connection:538 - 创建客户端连接失败 web3-rpc (尝试 5): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:13:29.426 | ERROR    | app.utils.mcp_client:_get_or_create_client:403 - 连接到MCP服务器 'web3-rpc' 失败，错误类型不可重试: MCPErrorType.UNKNOWN_ERROR
2025-08-03 13:13:29.501 | WARNING  | app.utils.mcp_client:get_tool_info:1092 - 获取服务器 web3-rpc 的工具信息失败: 连接到MCP服务器 'web3-rpc' 失败: 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:13:57.334 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 13:13:57.334 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 13:13:57.360 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 13:13:57.361 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 13:13:57.362 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 13:13:57.363 | INFO     | __main__:main:267 - 检查MCP服务器状态...
2025-08-03 13:13:57.363 | WARNING  | __main__:main:278 - 没有运行中的MCP服务器，尝试启动...
2025-08-03 13:13:57.363 | INFO     | app.services.mcp_manager:start_all_servers:847 - 开始启动所有MCP服务器...
2025-08-03 13:13:57.367 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 13:13:57.367 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 playwright 已在运行 (PID: 43752)，跳过启动
2025-08-03 13:13:57.371 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: minimax-mcp-js
2025-08-03 13:13:57.372 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 minimax-mcp-js 环境变量验证通过，已设置 4 个变量
2025-08-03 13:13:57.375 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 amap-maps (PID: 26162)
2025-08-03 13:13:57.375 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 amap-maps 已在运行 (PID: 26162)，跳过启动
2025-08-03 13:13:57.380 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 13:13:57.380 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 13:13:57.381 | INFO     | app.services.mcp_manager:start_all_servers:860 - ✅ 服务器 playwright 启动成功
2025-08-03 13:14:02.388 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 26164)
2025-08-03 13:14:13.901 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 minimax-mcp-js 启动成功 (PID: 26162)
2025-08-03 13:14:13.901 | INFO     | app.services.mcp_manager:start_all_servers:860 - ✅ 服务器 minimax-mcp-js 启动成功
2025-08-03 13:14:13.901 | INFO     | app.services.mcp_manager:start_all_servers:860 - ✅ 服务器 amap-maps 启动成功
2025-08-03 13:14:13.901 | INFO     | app.services.mcp_manager:start_all_servers:860 - ✅ 服务器 web3-rpc 启动成功
2025-08-03 13:14:13.901 | INFO     | __main__:main:291 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-08-03 13:14:13.901 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 13:14:13.902 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 13:14:13.902 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-08-03 13:14:13.902 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-08-03 13:14:13.902 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: playwright (PID: 43752)
2025-08-03 13:14:15.626 | INFO     | app.utils.mcp_client:_try_connect_existing_server:681 - 成功连接到运行中的服务器: playwright
2025-08-03 13:14:15.626 | INFO     | app.utils.mcp_client:_intelligent_server_recovery:741 - 成功连接到现有服务器: playwright
2025-08-03 13:14:15.626 | INFO     | app.utils.mcp_client:_get_or_create_client:371 - 使用智能恢复返回的客户端连接: playwright
2025-08-03 13:14:15.629 | INFO     | app.utils.mcp_client:_get_or_create_client:376 - 成功使用恢复的连接并加入连接池: playwright (尝试 1/5)
2025-08-03 13:14:15.629 | INFO     | __main__:sync_server_tools:114 - 服务器 playwright 共有 24 个工具
2025-08-03 13:14:15.680 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_close (服务器: playwright)
2025-08-03 13:14:15.683 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_resize (服务器: playwright)
2025-08-03 13:14:15.685 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_console_messages (服务器: playwright)
2025-08-03 13:14:15.687 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_handle_dialog (服务器: playwright)
2025-08-03 13:14:15.690 | INFO     | __main__:_sync_single_tool:192 - ✅ 创建工具: browser_evaluate (服务器: playwright)
2025-08-03 13:14:15.692 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_file_upload (服务器: playwright)
2025-08-03 13:14:15.694 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_install (服务器: playwright)
2025-08-03 13:14:15.697 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_press_key (服务器: playwright)
2025-08-03 13:14:15.699 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_type (服务器: playwright)
2025-08-03 13:14:15.701 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_navigate (服务器: playwright)
2025-08-03 13:14:15.704 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_navigate_back (服务器: playwright)
2025-08-03 13:14:15.706 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_navigate_forward (服务器: playwright)
2025-08-03 13:14:15.708 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_network_requests (服务器: playwright)
2025-08-03 13:14:15.710 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_take_screenshot (服务器: playwright)
2025-08-03 13:14:15.712 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_snapshot (服务器: playwright)
2025-08-03 13:14:15.715 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_click (服务器: playwright)
2025-08-03 13:14:15.717 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_drag (服务器: playwright)
2025-08-03 13:14:15.719 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_hover (服务器: playwright)
2025-08-03 13:14:15.721 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_select_option (服务器: playwright)
2025-08-03 13:14:15.724 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_tab_list (服务器: playwright)
2025-08-03 13:14:15.726 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_tab_new (服务器: playwright)
2025-08-03 13:14:15.728 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_tab_select (服务器: playwright)
2025-08-03 13:14:15.730 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_tab_close (服务器: playwright)
2025-08-03 13:14:15.733 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_wait_for (服务器: playwright)
2025-08-03 13:14:15.733 | INFO     | __main__:sync_server_tools:134 - 服务器 playwright 工具同步完成: 新增 1 个，更新 23 个
2025-08-03 13:14:15.733 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-08-03 13:14:15.734 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: minimax-mcp-js (PID: 26162)
2025-08-03 13:14:17.093 | INFO     | app.utils.mcp_client:_try_connect_existing_server:681 - 成功连接到运行中的服务器: minimax-mcp-js
2025-08-03 13:14:17.093 | INFO     | app.utils.mcp_client:_intelligent_server_recovery:741 - 成功连接到现有服务器: minimax-mcp-js
2025-08-03 13:14:17.093 | INFO     | app.utils.mcp_client:_get_or_create_client:371 - 使用智能恢复返回的客户端连接: minimax-mcp-js
2025-08-03 13:14:17.097 | INFO     | app.utils.mcp_client:_get_or_create_client:376 - 成功使用恢复的连接并加入连接池: minimax-mcp-js (尝试 1/5)
2025-08-03 13:14:17.097 | INFO     | __main__:sync_server_tools:114 - 服务器 minimax-mcp-js 共有 10 个工具
2025-08-03 13:14:17.103 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: text_to_audio (服务器: minimax-mcp-js)
2025-08-03 13:14:17.105 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: list_voices (服务器: minimax-mcp-js)
2025-08-03 13:14:17.107 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: play_audio (服务器: minimax-mcp-js)
2025-08-03 13:14:17.110 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: voice_clone (服务器: minimax-mcp-js)
2025-08-03 13:14:17.112 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: text_to_image (服务器: minimax-mcp-js)
2025-08-03 13:14:17.114 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: generate_video (服务器: minimax-mcp-js)
2025-08-03 13:14:17.116 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: image_to_video (服务器: minimax-mcp-js)
2025-08-03 13:14:17.119 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: query_video_generation (服务器: minimax-mcp-js)
2025-08-03 13:14:17.121 | INFO     | __main__:_sync_single_tool:192 - ✅ 创建工具: music_generation (服务器: minimax-mcp-js)
2025-08-03 13:14:17.123 | INFO     | __main__:_sync_single_tool:192 - ✅ 创建工具: voice_design (服务器: minimax-mcp-js)
2025-08-03 13:14:17.124 | INFO     | __main__:sync_server_tools:134 - 服务器 minimax-mcp-js 工具同步完成: 新增 2 个，更新 8 个
2025-08-03 13:14:17.124 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-08-03 13:14:17.125 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: amap-maps (PID: 26162)
2025-08-03 13:14:22.713 | INFO     | app.utils.mcp_client:_try_connect_existing_server:681 - 成功连接到运行中的服务器: amap-maps
2025-08-03 13:14:22.713 | INFO     | app.utils.mcp_client:_intelligent_server_recovery:741 - 成功连接到现有服务器: amap-maps
2025-08-03 13:14:22.713 | INFO     | app.utils.mcp_client:_get_or_create_client:371 - 使用智能恢复返回的客户端连接: amap-maps
2025-08-03 13:14:22.715 | INFO     | app.utils.mcp_client:_get_or_create_client:376 - 成功使用恢复的连接并加入连接池: amap-maps (尝试 1/5)
2025-08-03 13:14:22.715 | INFO     | __main__:sync_server_tools:114 - 服务器 amap-maps 共有 12 个工具
2025-08-03 13:14:22.728 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_regeocode (服务器: amap-maps)
2025-08-03 13:14:22.730 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_geo (服务器: amap-maps)
2025-08-03 13:14:22.733 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_ip_location (服务器: amap-maps)
2025-08-03 13:14:22.735 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_weather (服务器: amap-maps)
2025-08-03 13:14:22.737 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_search_detail (服务器: amap-maps)
2025-08-03 13:14:22.739 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_bicycling (服务器: amap-maps)
2025-08-03 13:14:22.741 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_direction_walking (服务器: amap-maps)
2025-08-03 13:14:22.744 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_direction_driving (服务器: amap-maps)
2025-08-03 13:14:22.746 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_direction_transit_integrated (服务器: amap-maps)
2025-08-03 13:14:22.749 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_distance (服务器: amap-maps)
2025-08-03 13:14:22.751 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_text_search (服务器: amap-maps)
2025-08-03 13:14:22.753 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_around_search (服务器: amap-maps)
2025-08-03 13:14:22.753 | INFO     | __main__:sync_server_tools:134 - 服务器 amap-maps 工具同步完成: 新增 0 个，更新 12 个
2025-08-03 13:14:22.753 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-08-03 13:14:22.754 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: web3-rpc (PID: 26164)
2025-08-03 13:14:52.877 | WARNING  | app.utils.mcp_client:_create_client_connection:538 - 创建客户端连接失败 web3-rpc (尝试 1): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:14:53.056 | WARNING  | app.utils.mcp_client:_try_connect_existing_server:700 - 连接到运行中服务器失败 web3-rpc: 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:14:53.676 | WARNING  | app.utils.mcp_client:_intelligent_server_recovery:759 - 服务器 web3-rpc 运行中但连接失败: 连接失败: 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:14:53.845 | WARNING  | app.utils.mcp_client:_get_or_create_client:362 - 无法启动MCP服务器 web3-rpc: 连接失败: 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)，第 1 次重试，延迟 1.05 秒...
2025-08-03 13:14:55.505 | INFO     | app.services.mcp_manager:_cleanup_zombie_processes:1099 - 开始清理僵尸进程
2025-08-03 13:14:55.507 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: web3-rpc (PID: 26164)
2025-08-03 13:15:32.167 | WARNING  | app.utils.mcp_client:_create_client_connection:538 - 创建客户端连接失败 web3-rpc (尝试 1): 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:15:38.701 | WARNING  | app.utils.mcp_client:_try_connect_existing_server:700 - 连接到运行中服务器失败 web3-rpc: 连接到 MCP 服务器 web3-rpc 超时 (30秒) (尝试复用进程 PID: 10741 失败)
2025-08-03 13:15:40.712 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 web3-rpc (PID: 26164)
2025-08-03 13:15:40.749 | INFO     | app.utils.mcp_client:_ensure_server_via_manager:495 - 通过管理器确保服务器运行: web3-rpc (PID: 26164)
2025-08-03 13:21:16.096 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-03 13:21:16.097 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-03 13:21:16.122 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-03 13:21:16.122 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-08-03 13:21:16.122 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-03 13:21:16.123 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-03 13:21:16.124 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-03 13:21:16.124 | INFO     | __main__:main:267 - 检查MCP服务器状态...
2025-08-03 13:21:16.125 | WARNING  | __main__:main:278 - 没有运行中的MCP服务器，尝试启动...
2025-08-03 13:21:16.125 | INFO     | app.services.mcp_manager:start_all_servers:847 - 开始启动所有MCP服务器...
2025-08-03 13:21:16.129 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 playwright (PID: 43752)
2025-08-03 13:21:16.129 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 playwright 已在运行 (PID: 43752)，跳过启动
2025-08-03 13:21:16.134 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: minimax-mcp-js
2025-08-03 13:21:16.134 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 minimax-mcp-js 环境变量验证通过，已设置 4 个变量
2025-08-03 13:21:16.137 | INFO     | app.services.mcp_manager:_check_process_uniqueness:258 - 发现现有MCP进程 amap-maps (PID: 39684)
2025-08-03 13:21:16.137 | INFO     | app.services.mcp_manager:start_server:355 - MCP服务器 amap-maps 已在运行 (PID: 39684)，跳过启动
2025-08-03 13:21:16.142 | INFO     | app.services.mcp_manager:start_server:368 - 正在启动MCP服务器: web3-rpc
2025-08-03 13:21:16.142 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:194 - MCP服务器 web3-rpc 环境变量验证通过，已设置 1 个变量
2025-08-03 13:21:16.143 | INFO     | app.services.mcp_manager:start_all_servers:860 - ✅ 服务器 playwright 启动成功
2025-08-03 13:21:21.150 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 web3-rpc 启动成功 (PID: 39686)
2025-08-03 13:21:32.659 | INFO     | app.services.mcp_manager:start_server:517 - MCP服务器 minimax-mcp-js 启动成功 (PID: 39684)
2025-08-03 13:21:32.659 | INFO     | app.services.mcp_manager:start_all_servers:860 - ✅ 服务器 minimax-mcp-js 启动成功
2025-08-03 13:21:32.659 | INFO     | app.services.mcp_manager:start_all_servers:860 - ✅ 服务器 amap-maps 启动成功
2025-08-03 13:21:32.659 | INFO     | app.services.mcp_manager:start_all_servers:860 - ✅ 服务器 web3-rpc 启动成功
2025-08-03 13:21:32.659 | INFO     | __main__:main:291 - 发现 4 个运行中的MCP服务器: playwright, minimax-mcp-js, amap-maps, web3-rpc
2025-08-03 13:21:32.659 | INFO     | app.utils.mcp_client:__init__:282 - MCP客户端包装器：配置加载成功
2025-08-03 13:21:32.660 | INFO     | app.utils.mcp_client:__init__:284 - 已加载 4 个MCP服务器配置
2025-08-03 13:21:32.660 | INFO     | __main__:sync_all_tools:37 - 开始同步MCP工具到数据库...
2025-08-03 13:21:32.660 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 playwright 的工具...
2025-08-03 13:21:32.660 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: playwright (PID: 43752)
2025-08-03 13:21:34.041 | INFO     | app.utils.mcp_client:_try_connect_existing_server:681 - 成功连接到运行中的服务器: playwright
2025-08-03 13:21:34.041 | INFO     | app.utils.mcp_client:_intelligent_server_recovery:741 - 成功连接到现有服务器: playwright
2025-08-03 13:21:34.041 | INFO     | app.utils.mcp_client:_get_or_create_client:371 - 使用智能恢复返回的客户端连接: playwright
2025-08-03 13:21:34.043 | INFO     | app.utils.mcp_client:_get_or_create_client:376 - 成功使用恢复的连接并加入连接池: playwright (尝试 1/5)
2025-08-03 13:21:34.044 | INFO     | __main__:sync_server_tools:114 - 服务器 playwright 共有 24 个工具
2025-08-03 13:21:34.082 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_close (服务器: playwright)
2025-08-03 13:21:34.085 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_resize (服务器: playwright)
2025-08-03 13:21:34.088 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_console_messages (服务器: playwright)
2025-08-03 13:21:34.090 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_handle_dialog (服务器: playwright)
2025-08-03 13:21:34.092 | INFO     | __main__:_sync_single_tool:192 - ✅ 创建工具: browser_evaluate (服务器: playwright)
2025-08-03 13:21:34.095 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_file_upload (服务器: playwright)
2025-08-03 13:21:34.097 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_install (服务器: playwright)
2025-08-03 13:21:34.099 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_press_key (服务器: playwright)
2025-08-03 13:21:34.102 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_type (服务器: playwright)
2025-08-03 13:21:34.104 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_navigate (服务器: playwright)
2025-08-03 13:21:34.106 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_navigate_back (服务器: playwright)
2025-08-03 13:21:34.108 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_navigate_forward (服务器: playwright)
2025-08-03 13:21:34.111 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_network_requests (服务器: playwright)
2025-08-03 13:21:34.113 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_take_screenshot (服务器: playwright)
2025-08-03 13:21:34.116 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_snapshot (服务器: playwright)
2025-08-03 13:21:34.118 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_click (服务器: playwright)
2025-08-03 13:21:34.121 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_drag (服务器: playwright)
2025-08-03 13:21:34.123 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_hover (服务器: playwright)
2025-08-03 13:21:34.126 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_select_option (服务器: playwright)
2025-08-03 13:21:34.129 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_tab_list (服务器: playwright)
2025-08-03 13:21:34.131 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_tab_new (服务器: playwright)
2025-08-03 13:21:34.134 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_tab_select (服务器: playwright)
2025-08-03 13:21:34.137 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_tab_close (服务器: playwright)
2025-08-03 13:21:34.139 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: browser_wait_for (服务器: playwright)
2025-08-03 13:21:34.139 | INFO     | __main__:sync_server_tools:134 - 服务器 playwright 工具同步完成: 新增 1 个，更新 23 个
2025-08-03 13:21:34.139 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 minimax-mcp-js 的工具...
2025-08-03 13:21:34.140 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: minimax-mcp-js (PID: 39684)
2025-08-03 13:21:35.034 | INFO     | app.utils.mcp_client:_try_connect_existing_server:681 - 成功连接到运行中的服务器: minimax-mcp-js
2025-08-03 13:21:35.034 | INFO     | app.utils.mcp_client:_intelligent_server_recovery:741 - 成功连接到现有服务器: minimax-mcp-js
2025-08-03 13:21:35.034 | INFO     | app.utils.mcp_client:_get_or_create_client:371 - 使用智能恢复返回的客户端连接: minimax-mcp-js
2025-08-03 13:21:35.038 | INFO     | app.utils.mcp_client:_get_or_create_client:376 - 成功使用恢复的连接并加入连接池: minimax-mcp-js (尝试 1/5)
2025-08-03 13:21:35.038 | INFO     | __main__:sync_server_tools:114 - 服务器 minimax-mcp-js 共有 10 个工具
2025-08-03 13:21:35.044 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: text_to_audio (服务器: minimax-mcp-js)
2025-08-03 13:21:35.047 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: list_voices (服务器: minimax-mcp-js)
2025-08-03 13:21:35.049 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: play_audio (服务器: minimax-mcp-js)
2025-08-03 13:21:35.052 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: voice_clone (服务器: minimax-mcp-js)
2025-08-03 13:21:35.054 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: text_to_image (服务器: minimax-mcp-js)
2025-08-03 13:21:35.057 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: generate_video (服务器: minimax-mcp-js)
2025-08-03 13:21:35.060 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: image_to_video (服务器: minimax-mcp-js)
2025-08-03 13:21:35.062 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: query_video_generation (服务器: minimax-mcp-js)
2025-08-03 13:21:35.065 | INFO     | __main__:_sync_single_tool:192 - ✅ 创建工具: music_generation (服务器: minimax-mcp-js)
2025-08-03 13:21:35.067 | INFO     | __main__:_sync_single_tool:192 - ✅ 创建工具: voice_design (服务器: minimax-mcp-js)
2025-08-03 13:21:35.067 | INFO     | __main__:sync_server_tools:134 - 服务器 minimax-mcp-js 工具同步完成: 新增 2 个，更新 8 个
2025-08-03 13:21:35.067 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 amap-maps 的工具...
2025-08-03 13:21:35.067 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: amap-maps (PID: 39684)
2025-08-03 13:21:36.137 | INFO     | app.utils.mcp_client:_try_connect_existing_server:681 - 成功连接到运行中的服务器: amap-maps
2025-08-03 13:21:36.137 | INFO     | app.utils.mcp_client:_intelligent_server_recovery:741 - 成功连接到现有服务器: amap-maps
2025-08-03 13:21:36.138 | INFO     | app.utils.mcp_client:_get_or_create_client:371 - 使用智能恢复返回的客户端连接: amap-maps
2025-08-03 13:21:36.139 | INFO     | app.utils.mcp_client:_get_or_create_client:376 - 成功使用恢复的连接并加入连接池: amap-maps (尝试 1/5)
2025-08-03 13:21:36.139 | INFO     | __main__:sync_server_tools:114 - 服务器 amap-maps 共有 12 个工具
2025-08-03 13:21:36.144 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_regeocode (服务器: amap-maps)
2025-08-03 13:21:36.147 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_geo (服务器: amap-maps)
2025-08-03 13:21:36.149 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_ip_location (服务器: amap-maps)
2025-08-03 13:21:36.152 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_weather (服务器: amap-maps)
2025-08-03 13:21:36.154 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_search_detail (服务器: amap-maps)
2025-08-03 13:21:36.157 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_bicycling (服务器: amap-maps)
2025-08-03 13:21:36.160 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_direction_walking (服务器: amap-maps)
2025-08-03 13:21:36.162 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_direction_driving (服务器: amap-maps)
2025-08-03 13:21:36.165 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_direction_transit_integrated (服务器: amap-maps)
2025-08-03 13:21:36.168 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_distance (服务器: amap-maps)
2025-08-03 13:21:36.170 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_text_search (服务器: amap-maps)
2025-08-03 13:21:36.173 | INFO     | __main__:_sync_single_tool:184 - ✅ 更新工具: maps_around_search (服务器: amap-maps)
2025-08-03 13:21:36.173 | INFO     | __main__:sync_server_tools:134 - 服务器 amap-maps 工具同步完成: 新增 0 个，更新 12 个
2025-08-03 13:21:36.173 | INFO     | __main__:sync_server_tools:92 - 开始同步服务器 web3-rpc 的工具...
2025-08-03 13:21:36.173 | INFO     | app.utils.mcp_client:_try_connect_existing_server:674 - 尝试连接到运行中的服务器: web3-rpc (PID: 39686)
2025-08-16 13:37:21.934 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-16 13:37:21.934 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-16 13:37:21.962 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-16 13:37:21.962 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-16 13:37:21.962 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-16 13:37:21.962 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-16 13:37:21.962 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-16 13:37:21.963 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-16 13:37:21.964 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-16 13:37:21.965 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-16 13:37:21.965 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/cleanup/orphaned, Methods: {'POST'}, Name: cleanup_orphaned_mcp_processes
2025-08-16 13:37:21.965 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/cleanup/zombies, Methods: {'POST'}, Name: cleanup_zombie_processes
2025-08-16 13:37:21.965 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-16 13:37:21.965 | INFO     | __main__:test_mcp_process_matching:20 - 开始测试MCP进程匹配逻辑...
2025-08-16 13:37:21.966 | INFO     | app.services.mcp_manager:_load_server_configs:122 - 已加载 4 个MCP服务器配置
2025-08-16 13:37:21.966 | INFO     | app.services.mcp_manager:_generate_env_validation_rules:170 - 生成了 4 个服务器的环境变量验证规则
2025-08-16 13:37:21.966 | INFO     | __main__:test_mcp_process_matching:28 - 测试服务器: amap-maps
2025-08-16 13:37:21.966 | INFO     | __main__:test_mcp_process_matching:36 - 服务器配置: {'name': '高德地图API', 'description': '提供高德地图服务和位置信息', 'command': 'npx', 'args': ['-y', '@amap/amap-maps-mcp-server'], 'env': {'AMAP_MAPS_API_KEY': '30f011f42164568c6cc85cb56ef197dd'}, 'enabled': True}
2025-08-16 13:37:21.966 | INFO     | __main__:test_mcp_process_matching:39 - 启动服务器: amap-maps
2025-08-16 13:37:22.390 | INFO     | app.services.mcp_manager:start_server:663 - 正在启动MCP服务器: amap-maps
2025-08-16 13:37:22.390 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:345 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-16 13:37:27.502 | INFO     | app.services.mcp_manager:start_server:797 - MCP服务器 amap-maps 启动成功 (PID: 38845)
2025-08-16 13:37:27.502 | INFO     | __main__:test_mcp_process_matching:43 - ✅ 服务器 amap-maps 启动成功
2025-08-16 13:37:30.719 | INFO     | app.services.mcp_manager:_check_process_uniqueness:435 - 发现稳定运行的MCP进程 amap-maps (PID: 38845)
2025-08-16 13:37:30.719 | INFO     | __main__:test_mcp_process_matching:51 - ✅ 发现运行中的进程 PID: 38845
2025-08-16 13:37:30.719 | INFO     | __main__:test_mcp_process_matching:54 - 尝试再次启动（测试重复检测）...
2025-08-16 13:37:30.933 | INFO     | app.services.mcp_manager:_check_process_uniqueness:435 - 发现稳定运行的MCP进程 amap-maps (PID: 38845)
2025-08-16 13:37:30.933 | INFO     | app.services.mcp_manager:start_server:597 - 服务器 amap-maps 已在运行 (PID: 38845)，跳过启动
2025-08-16 13:37:30.933 | WARNING  | __main__:test_mcp_process_matching:60 - ⚠️ 重复启动未被阻止
2025-08-16 13:38:40.432 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-16 13:38:40.432 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-16 13:38:40.468 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-16 13:38:40.468 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-16 13:38:40.468 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-16 13:38:40.468 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-16 13:38:40.468 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-16 13:38:40.468 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-16 13:38:40.468 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-16 13:38:40.468 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-16 13:38:40.468 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-16 13:38:40.469 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-16 13:38:40.470 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-16 13:38:40.470 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-16 13:38:40.470 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-16 13:38:40.470 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-16 13:38:40.470 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-16 13:38:40.470 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-16 13:38:40.470 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/cleanup/orphaned, Methods: {'POST'}, Name: cleanup_orphaned_mcp_processes
2025-08-16 13:38:40.470 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/cleanup/zombies, Methods: {'POST'}, Name: cleanup_zombie_processes
2025-08-16 13:38:40.470 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-16 13:38:40.471 | INFO     | __main__:test_final:20 - 开始最终测试...
2025-08-16 13:38:40.471 | INFO     | app.services.mcp_manager:_load_server_configs:122 - 已加载 4 个MCP服务器配置
2025-08-16 13:38:40.471 | INFO     | app.services.mcp_manager:_generate_env_validation_rules:170 - 生成了 4 个服务器的环境变量验证规则
2025-08-16 13:38:40.471 | INFO     | __main__:test_final:26 - 第一次启动 amap-maps...
2025-08-16 13:38:40.684 | INFO     | app.services.mcp_manager:start_server:648 - 正在启动MCP服务器: amap-maps
2025-08-16 13:38:40.684 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:345 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-16 13:38:45.794 | INFO     | app.services.mcp_manager:start_server:782 - MCP服务器 amap-maps 启动成功 (PID: 41662)
2025-08-16 13:38:45.794 | INFO     | __main__:test_final:28 - 第一次启动结果: True
2025-08-16 13:38:47.796 | INFO     | __main__:test_final:35 - 第二次启动 amap-maps（应该被跳过）...
2025-08-16 13:38:48.011 | INFO     | app.services.mcp_manager:_check_process_uniqueness:435 - 发现稳定运行的MCP进程 amap-maps (PID: 41680)
2025-08-16 13:38:48.011 | INFO     | app.services.mcp_manager:start_server:597 - 服务器 amap-maps 已在运行 (PID: 41680)，跳过启动
2025-08-16 13:38:48.011 | INFO     | __main__:test_final:37 - 第二次启动结果: True
2025-08-16 13:38:48.011 | INFO     | __main__:test_final:40 - ✅ 第二次启动被正确跳过
2025-08-16 13:38:48.011 | INFO     | __main__:test_final:44 - 测试完成
2025-08-16 14:01:38.353 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-16 14:01:38.353 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-16 14:01:38.381 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-16 14:01:38.381 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-16 14:01:38.381 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-16 14:01:38.382 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/cleanup/orphaned, Methods: {'POST'}, Name: cleanup_orphaned_mcp_processes
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/cleanup/zombies, Methods: {'POST'}, Name: cleanup_zombie_processes
2025-08-16 14:01:38.383 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-16 14:01:38.384 | INFO     | app.services.mcp_manager:_load_server_configs:122 - 已加载 4 个MCP服务器配置
2025-08-16 14:01:38.384 | INFO     | app.services.mcp_manager:_generate_env_validation_rules:170 - 生成了 4 个服务器的环境变量验证规则
2025-08-16 14:02:04.164 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-08-16 14:02:04.164 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/interpret, Methods: {'POST'}, Name: process_intent
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /api/v1/intent/confirm, Methods: {'POST'}, Name: confirm_execution
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-08-16 14:02:04.192 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/health, Methods: {'GET'}, Name: get_mcp_servers_health
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-08-16 14:02:04.193 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-08-16 14:02:04.194 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-08-16 14:02:04.194 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-08-16 14:02:04.194 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/cleanup/orphaned, Methods: {'POST'}, Name: cleanup_orphaned_mcp_processes
2025-08-16 14:02:04.194 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/cleanup/zombies, Methods: {'POST'}, Name: cleanup_zombie_processes
2025-08-16 14:02:04.194 | INFO     | app.main:<module>:192 - ==============================================================================
2025-08-16 14:02:04.194 | INFO     | app.services.mcp_manager:_load_server_configs:122 - 已加载 4 个MCP服务器配置
2025-08-16 14:02:04.194 | INFO     | app.services.mcp_manager:_generate_env_validation_rules:170 - 生成了 4 个服务器的环境变量验证规则
2025-08-16 14:02:04.408 | INFO     | app.services.mcp_manager:start_server:648 - 正在启动MCP服务器: amap-maps
2025-08-16 14:02:04.409 | INFO     | app.services.mcp_manager:_prepare_and_validate_env:345 - MCP服务器 amap-maps 环境变量验证通过，已设置 1 个变量
2025-08-16 14:02:09.519 | INFO     | app.services.mcp_manager:start_server:782 - MCP服务器 amap-maps 启动成功 (PID: 24260)
2025-08-16 14:02:09.734 | INFO     | app.services.mcp_manager:_check_process_uniqueness:435 - 发现稳定运行的MCP进程 amap-maps (PID: 24275)
2025-08-16 14:02:09.734 | INFO     | app.services.mcp_manager:start_server:597 - 服务器 amap-maps 已在运行 (PID: 24275)，跳过启动
