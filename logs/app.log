2025-05-16 18:56:37.923 | INFO     | app.main:<module>:32 - 启动应用: AI Assistant API v0.1.0
2025-05-16 18:56:37.924 | INFO     | app.main:<module>:33 - 数据库: ai_assistant
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:89 - ============================== Registered Routes ==============================
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /docs, Methods: {'GET', 'HEAD'}, Name: swagger_ui_html
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /docs/oauth2-redirect, Methods: {'GET', 'HEAD'}, Name: swagger_ui_redirect
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /, Methods: {'GET'}, Name: root
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /health, Methods: {'GET'}, Name: health_check
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-05-16 18:56:37.933 | INFO     | app.main:<module>:92 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-05-16 18:56:37.934 | INFO     | app.main:<module>:96 - ==============================================================================
2025-05-16 18:56:50.037 | INFO     | app.main:<module>:32 - 启动应用: AI Assistant API v0.1.0
2025-05-16 18:56:50.037 | INFO     | app.main:<module>:33 - 数据库: ai_assistant
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:89 - ============================== Registered Routes ==============================
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /docs, Methods: {'GET', 'HEAD'}, Name: swagger_ui_html
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /docs/oauth2-redirect, Methods: {'GET', 'HEAD'}, Name: swagger_ui_redirect
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /, Methods: {'GET'}, Name: root
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /health, Methods: {'GET'}, Name: health_check
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:92 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-05-16 18:56:50.046 | INFO     | app.main:<module>:96 - ==============================================================================
2025-07-21 02:25:33.262 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:25:33.262 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:25:33.288 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:25:33.289 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:25:33.290 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:26:41.565 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:26:41.565 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:26:41.591 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:26:41.591 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:26:41.591 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:26:41.591 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:26:41.592 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:26:41.593 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:26:41.594 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:26:41.611 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:26:56.750 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:26:56.750 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:26:56.776 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:26:56.777 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:26:56.778 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:26:56.778 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:26:56.778 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:26:56.778 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:26:56.778 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:26:56.796 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:26:56.796 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:26:56.838 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_1] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ec2d5c0 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ebec2e0>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ea5c8a0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ec27880>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ea5c8a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.851 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 帮我查找Python教程
2025-07-21 02:26:56.859 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_2] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ed41540 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec304a0>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d2660>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea89a80>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d2660>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.866 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 深圳明天天气怎么样
2025-07-21 02:26:56.872 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_3] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e1aa600 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec32260>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebb9ef0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea89c60>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebb9ef0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.879 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_4] 开始处理意图: 附近有什么好吃的餐厅
2025-07-21 02:26:56.886 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_4] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ea81fc0 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec31fc0>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1e9b00>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8a520>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1e9b00>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.893 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_5] 开始处理意图: 比特币现在多少钱
2025-07-21 02:26:56.899 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_5] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e1f3280 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec31700>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebba0b0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea88040>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebba0b0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.906 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_6] 开始处理意图: 用浏览器帮我打开百度
2025-07-21 02:26:56.912 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_6] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ea81100 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec30f20>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1b7c40>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8a340>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1b7c40>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.919 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_7] 开始处理意图: 你好，今天心情怎么样
2025-07-21 02:26:56.921 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_7 不存在，创建新会话
2025-07-21 02:26:56.938 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_7] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e00d640 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec32a40>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d31c0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8ade0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d31c0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.945 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_8] 开始处理意图: 什么是人工智能
2025-07-21 02:26:56.947 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_8 不存在，创建新会话
2025-07-21 02:26:56.963 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_8] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e006680 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891eba8c80>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d0280>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8afc0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d0280>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.970 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_9] 开始处理意图: 我今天很开心
2025-07-21 02:26:56.971 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_9 不存在，创建新会话
2025-07-21 02:26:56.988 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_9] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ed4cc80 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec32c00>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1e5d30>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8a980>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1e5d30>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:56.995 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_10] 开始处理意图: Python是什么编程语言
2025-07-21 02:26:56.997 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_10 不存在，创建新会话
2025-07-21 02:26:57.016 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_10] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891e023c40 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891eba8c80>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d0130>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8bb00>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891e1d0130>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:26:57.319 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_11] 开始处理意图: 帮我计算1+1等于多少
2025-07-21 02:26:57.321 | INFO     | app.models.session:get_or_create:57 - 会话 test_session_11 不存在，创建新会话
2025-07-21 02:26:57.338 | ERROR    | app.services.intent_service:process_intent:191 - [Session: test_session_11] 处理意图时发生意外错误: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
Traceback (most recent call last):

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1687, in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           │    │              └ 'enabled'
           │    └ {'active': 'active', 'inactive': 'inactive', 'pending': 'pending', None: None}
           └ ENUM('active', 'inactive', 'pending')

KeyError: 'enabled'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/home/devbox/project/test_improved_prompt.py", line 161, in <module>
    asyncio.run(test_intent_parsing())
    │       │   └ <function test_intent_parsing at 0x79892384c4a0>
    │       └ <function run at 0x798922e5b060>
    └ <module 'asyncio' from '/usr/lib/python3.11/asyncio/__init__.py'>

  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object test_intent_parsing at 0x79891ef92f80>
           │      └ <function Runner.run at 0x798922cb68e0>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<test_intent_parsing() running at /home/devbox/project/test_improved_prompt.py:116> cb=[_run...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x798922cb4540>
           │    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x79891ecdd090>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 640, in run_until_complete
    self.run_forever()
    │    └ <function BaseEventLoop.run_forever at 0x798922cb44a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 607, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x798922cb62a0>
    └ <_UnixSelectorEventLoop running=True closed=False debug=False>
  File "/usr/lib/python3.11/asyncio/base_events.py", line 1922, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x798922e10900>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "/usr/lib/python3.11/asyncio/events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "/home/devbox/project/test_improved_prompt.py", line 116, in test_intent_parsing
    result = await intent_service.process_intent(
                   │              └ <function IntentService.process_intent at 0x79891f418220>
                   └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

> File "/home/devbox/project/backend/app/services/intent_service.py", line 86, in process_intent
    available_tools = await self._get_available_tools(db)
                            │    │                    └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>
                            │    └ <function IntentService._get_available_tools at 0x79891f418180>
                            └ <app.services.intent_service.IntentService object at 0x798922ba82d0>

  File "/home/devbox/project/backend/app/services/intent_service.py", line 18, in _get_available_tools
    result = await db.execute(select(Tool))
                   │  │       │      └ <class 'app.models.tool.Tool'>
                   │  │       └ <function select at 0x798921227ec0>
                   │  └ <function AsyncSession.execute at 0x798920d625c0>
                   └ <sqlalchemy.orm.session.AsyncSession object at 0x79891ef1f3d0>

  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x7989219909a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ 74
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x79891ebb68c0 (otid=0x79892195c390) dead>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x798920e828e0>
           └ <sqlalchemy.orm.session.Session object at 0x79891ef0ee90>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x7989210d3d80>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 309, in orm_execute_statement
    return cls.orm_setup_cursor_result(
           │   └ <classmethod(<function ORMCompileState.orm_setup_cursor_result at 0x79892110c540>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/context.py", line 616, in orm_setup_cursor_result
    return loading.instances(result, querycontext)
           │       │         │       └ <sqlalchemy.orm.context.QueryContext object at 0x79891ec33060>
           │       │         └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebba4a0>
           │       └ <function instances at 0x7989210d3ba0>
           └ <module 'sqlalchemy.orm.loading' from '/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py'>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 261, in instances
    _prebuffered = list(chunks(None))
                        └ <function instances.<locals>.chunks at 0x79891ea8b600>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/orm/loading.py", line 219, in chunks
    fetch = cursor._raw_all_rows()
            │      └ <function ResultInternal._raw_all_rows at 0x7989212f58a0>
            └ <sqlalchemy.engine.cursor.CursorResult object at 0x79891ebba4a0>
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in _raw_all_rows
    return [make_row(row) for row in rows]
            │                        └ [(1, 'getRubicBridgeQuotes', 'getRubicBridgeQuotes', 'mcp', 'Get all available cross-chain bridge routes for swapping tokens ...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/engine/result.py", line 541, in <listcomp>
    return [make_row(row) for row in rows]
            │        │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            │        └ (76, 'upload_test_tool_20cb2009', 'upload_test_tool', '', 'A tool for upload testing', '{"url": "", "method": "POST", "header...
            └ functools.partial(<class 'sqlalchemy.engine.row.Row'>, <sqlalchemy.engine.cursor.CursorResultMetaData object at 0x79891ea5c97...
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 22, in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
  File "lib/sqlalchemy/cyextension/resultproxy.pyx", line 79, in sqlalchemy.cyextension.resultproxy._apply_processors
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1807, in process
    value = self._object_value_for_elem(value)
            │    │                      └ 'enabled'
            │    └ <function ENUM._object_value_for_elem at 0x79892003ea20>
            └ ENUM('active', 'inactive', 'pending')
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/dialects/mysql/enumerated.py", line 87, in _object_value_for_elem
    return super()._object_value_for_elem(elem)
                                          └ 'enabled'
  File "/home/devbox/project/.venv/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1689, in _object_value_for_elem
    raise LookupError(

LookupError: 'enabled' is not among the defined enum values. Enum name: None. Possible values: active, inactive, pending
2025-07-21 02:27:29.598 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:27:29.598 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:27:29.623 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:27:29.624 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:27:29.625 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:27:29.625 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:27:39.118 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:27:39.118 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:27:39.145 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:27:39.145 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:27:39.146 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:27:39.147 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:27:39.148 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:27:39.148 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:27:39.167 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:27:39.167 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:27:39.214 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:39.215 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:56.517 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_1] LLM未提供确认文本，生成确认文本...
2025-07-21 02:27:58.356 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:27:58.356 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_1] LLM 决定调用工具: ['browser_navigate']
2025-07-21 02:27:58.356 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_1] 确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:27:58.371 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_1] 已存储待执行工具信息
2025-07-21 02:27:58.371 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 帮我查找Python教程
2025-07-21 02:27:58.379 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.379 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.379 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:27:58.380 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.380 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:28:10.380 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 深圳明天天气怎么样
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.388 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.389 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.389 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:10.389 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:15.847 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:28:17.457 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要了解深圳明天的天气情况吗？
2025-07-21 02:28:17.457 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:28:17.457 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_3] 确认文本: 您想要了解深圳明天的天气情况吗？
2025-07-21 02:28:17.472 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_3] 已存储待执行工具信息
2025-07-21 02:28:17.473 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_4] 开始处理意图: 附近有什么好吃的餐厅
2025-07-21 02:28:17.482 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:17.483 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:26.054 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_4] LLM未提供确认文本，生成确认文本...
2025-07-21 02:28:28.985 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要查找附近的美食餐厅吗？
2025-07-21 02:28:28.986 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_4] LLM 决定调用工具: ['maps_text_search']
2025-07-21 02:28:28.986 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_4] 确认文本: 您想要查找附近的美食餐厅吗？
2025-07-21 02:28:29.001 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_4] 已存储待执行工具信息
2025-07-21 02:28:29.002 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_5] 开始处理意图: 比特币现在多少钱
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.011 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.012 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:29.012 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:42.929 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_5] LLM未提供确认文本，生成确认文本...
2025-07-21 02:28:44.424 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要了解比特币的当前价格吗？
2025-07-21 02:28:44.425 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_5] LLM 决定调用工具: ['getCoinGeckoPrices']
2025-07-21 02:28:44.425 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_5] 确认文本: 您想要了解比特币的当前价格吗？
2025-07-21 02:28:44.438 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_5] 已存储待执行工具信息
2025-07-21 02:28:44.438 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_6] 开始处理意图: 用浏览器帮我打开百度
2025-07-21 02:28:44.446 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.446 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.446 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.446 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:44.447 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:47.256 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_6] LLM未提供确认文本，生成确认文本...
2025-07-21 02:28:49.687 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要访问百度网站吗？
2025-07-21 02:28:49.687 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_6] LLM 决定调用工具: ['browser_navigate']
2025-07-21 02:28:49.687 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_6] 确认文本: 您想要访问百度网站吗？
2025-07-21 02:28:49.699 | INFO     | app.services.intent_service:_store_pending_tools:299 - [Session: test_session_6] 已存储待执行工具信息
2025-07-21 02:28:49.700 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_7] 开始处理意图: 你好，今天心情怎么样
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:49.709 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.514 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_7] LLM 直接回复，无需调用工具。
2025-07-21 02:28:51.514 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_8] 开始处理意图: 什么是人工智能
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.522 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.523 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.523 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:51.523 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.989 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_8] LLM 直接回复，无需调用工具。
2025-07-21 02:28:53.989 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_9] 开始处理意图: 我今天很开心
2025-07-21 02:28:53.997 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.997 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.997 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.997 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:53.998 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.011 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_9] LLM 直接回复，无需调用工具。
2025-07-21 02:28:58.012 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_10] 开始处理意图: Python是什么编程语言
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:28:58.020 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.169 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_10] LLM 直接回复，无需调用工具。
2025-07-21 02:29:02.169 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_11] 开始处理意图: 帮我计算1+1等于多少
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:02.177 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:05.471 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_11] LLM 直接回复，无需调用工具。
2025-07-21 02:29:24.254 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:29:24.254 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:29:24.282 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:29:24.283 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:29:24.284 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:29:46.456 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:29:46.456 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:29:46.481 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:29:46.482 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:29:46.483 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:29:46.483 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:29:46.499 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:29:46.500 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:46.538 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.505 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_1] LLM 直接回复，无需调用工具。
2025-07-21 02:29:53.506 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.512 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.513 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.513 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.513 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:29:53.513 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.935 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:30:12.935 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:12.941 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:16.107 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:30:19.214 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:30:19.214 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:30:19.214 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:30:51.760 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:30:51.760 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:30:51.786 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:30:51.786 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'HEAD', 'GET'}, Name: openapi
2025-07-21 02:30:51.786 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'HEAD', 'GET'}, Name: redoc_html
2025-07-21 02:30:51.786 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:30:51.787 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:30:51.788 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:30:51.789 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:30:51.805 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:30:51.806 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:30:51.845 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:51.846 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.561 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_1] LLM 直接回复，无需调用工具。
2025-07-21 02:30:57.561 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:30:57.567 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:02.999 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:31:02.999 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:03.005 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:31:06.043 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:31:08.133 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:31:08.133 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:31:08.134 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:32:03.689 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:32:03.689 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:32:03.714 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:32:03.715 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:32:03.716 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:32:03.717 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:32:03.717 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:32:03.717 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:32:03.717 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:32:03.717 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:32:03.733 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:32:03.734 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:32:03.773 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.773 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.773 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:03.774 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.794 | INFO     | app.services.intent_service:process_intent:183 - [Session: test_session_1] LLM 直接回复，无需调用工具。
2025-07-21 02:32:36.794 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.801 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.802 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:36.802 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.898 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_2] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:32:53.898 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_2] 确认文本: 

<response>

2025-07-21 02:32:53.899 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.905 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:53.906 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:32:56.275 | INFO     | app.services.intent_service:process_intent:161 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:32:59.203 | INFO     | app.services.intent_service:generate_confirmation_text:246 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:32:59.203 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:32:59.203 | INFO     | app.services.intent_service:process_intent:169 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:36:23.089 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:36:23.089 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:36:23.114 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:36:23.115 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:36:23.116 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:36:23.116 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:36:23.116 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:36:23.116 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:36:23.133 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:36:23.133 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.173 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.174 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.174 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:23.174 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:33.565 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_1] LLM未提供确认文本，生成确认文本...
2025-07-21 02:36:36.009 | INFO     | app.services.intent_service:generate_confirmation_text:251 - 生成的确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:36:36.009 | INFO     | app.services.intent_service:process_intent:171 - [Session: test_session_1] LLM 决定调用工具: ['browser_navigate']
2025-07-21 02:36:36.010 | INFO     | app.services.intent_service:process_intent:174 - [Session: test_session_1] 确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:36:36.010 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:36.016 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.629 | INFO     | app.services.intent_service:process_intent:188 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:36:41.630 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:36:41.635 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.635 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:41.636 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:36:50.898 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:37:00.025 | INFO     | app.services.intent_service:generate_confirmation_text:251 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:37:00.025 | INFO     | app.services.intent_service:process_intent:171 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:37:00.025 | INFO     | app.services.intent_service:process_intent:174 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:37:35.195 | INFO     | app.main:<module>:39 - 启动应用: AI Assistant API v0.1.0
2025-07-21 02:37:35.195 | INFO     | app.main:<module>:40 - 数据库: ai_assistant
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:181 - ============================== Registered Routes ==============================
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:188 - Path: /openapi.json, Methods: {'GET', 'HEAD'}, Name: openapi
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:188 - Path: /redoc, Methods: {'GET', 'HEAD'}, Name: redoc_html
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:188 - Path: /docs, Methods: {'GET'}, Name: custom_swagger_ui_html
2025-07-21 02:37:35.220 | INFO     | app.main:<module>:188 - Path: /, Methods: {'GET'}, Name: root
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /health, Methods: {'GET'}, Name: health_check
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/interpret, Methods: {'POST'}, Name: process_intent
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/confirm, Methods: {'POST'}, Name: confirm_execution
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/execute, Methods: {'POST'}, Name: execute_tool
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/tools, Methods: {'GET'}, Name: get_tools
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/register, Methods: {'POST'}, Name: register
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/token, Methods: {'POST'}, Name: login_for_access_token
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/login, Methods: {'POST'}, Name: login
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/auth/me, Methods: {'GET'}, Name: get_me
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'GET'}, Name: get_developer_tools
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools, Methods: {'POST'}, Name: create_developer_tool
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'GET'}, Name: get_developer_tool
2025-07-21 02:37:35.221 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'PUT'}, Name: update_developer_tool
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}, Methods: {'DELETE'}, Name: delete_developer_tool
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload, Methods: {'POST'}, Name: upload_tool_package
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/upload/validate, Methods: {'POST'}, Name: validate_tool_package
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/{tool_id}/test, Methods: {'POST'}, Name: test_developer_tool
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/dev/tools/test/batch, Methods: {'POST'}, Name: batch_test_tools
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status, Methods: {'GET'}, Name: get_mcp_servers_status
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/status/{server_name}, Methods: {'GET'}, Name: get_mcp_server_status
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/restart/{server_name}, Methods: {'POST'}, Name: restart_mcp_server
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/start/{server_name}, Methods: {'POST'}, Name: start_mcp_server
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:188 - Path: /api/v1/mcp/stop/{server_name}, Methods: {'POST'}, Name: stop_mcp_server
2025-07-21 02:37:35.222 | INFO     | app.main:<module>:192 - ==============================================================================
2025-07-21 02:37:35.223 | INFO     | app.utils.db:init_db:207 - 开始使用同步引擎创建数据库表...
2025-07-21 02:37:35.240 | INFO     | app.utils.db:init_db:209 - 数据库表创建成功 (使用同步引擎)
2025-07-21 02:37:35.240 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_1] 开始处理意图: 搜索最新的AI技术发展趋势
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.281 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.282 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.282 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.282 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:35.282 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:43.176 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_1] LLM未提供确认文本，生成确认文本...
2025-07-21 02:37:45.844 | INFO     | app.services.intent_service:generate_confirmation_text:251 - 生成的确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:37:45.844 | INFO     | app.services.intent_service:process_intent:171 - [Session: test_session_1] LLM 决定调用工具: ['browser_navigate']
2025-07-21 02:37:45.844 | INFO     | app.services.intent_service:process_intent:174 - [Session: test_session_1] 确认文本: 您想要了解最新的AI技术发展趋势吗？
2025-07-21 02:37:45.844 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_2] 开始处理意图: 你好，今天天气怎么样？
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:45.850 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.318 | INFO     | app.services.intent_service:process_intent:188 - [Session: test_session_2] LLM 直接回复，无需调用工具。
2025-07-21 02:37:55.319 | INFO     | app.services.intent_service:process_intent:72 - [Session: test_session_3] 开始处理意图: 帮我查一下北京的天气
2025-07-21 02:37:55.325 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_467c5aa2 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.325 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_408894f1 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.325 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_92b0e2ae 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.325 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_9a03b62e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_a25a8b30 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_cb8ce41f 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_19ff57f3 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_6adb3c05 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 upload_test_tool_20cb2009 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 calculator_7300ec9a 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:37:55.326 | WARNING  | app.services.intent_service:_get_available_tools:31 - 工具 text_processor_1260529e 的 request_schema 格式无效 (非 object 类型)，已跳过：{}
2025-07-21 02:38:00.378 | INFO     | app.services.intent_service:process_intent:166 - [Session: test_session_3] LLM未提供确认文本，生成确认文本...
2025-07-21 02:38:04.829 | INFO     | app.services.intent_service:generate_confirmation_text:251 - 生成的确认文本: 您想要查询北京的天气情况吗？
2025-07-21 02:38:04.829 | INFO     | app.services.intent_service:process_intent:171 - [Session: test_session_3] LLM 决定调用工具: ['maps_weather']
2025-07-21 02:38:04.829 | INFO     | app.services.intent_service:process_intent:174 - [Session: test_session_3] 确认文本: 您想要查询北京的天气情况吗？
